---
title: 如何设计可以动态扩容缩容的分库分表方案
date: 2021-04-07 22:30:20
tags:
---

![](/upload/75932a005c95e3bd1d321a432720cf85.png)
	设定好几台数据库服务器，每台服务器上几个库，每个库多少个表，推荐是32库 * 32表。

　　比如4台服务器，每台服务器上8个库，每个库32张表。

　　路由的规则，orderId%32 = 库，orderId / 32 %32 = 表

　　扩容的时候，申请增加更多的数据库服务器，装好mysql，倍数扩容，4台服务器，扩到8台服务器，16台服务器

　　由dba负责将原先数据库服务器的库，迁移到新的数据库服务器上去，很多工具，库迁移，比较便捷

　　我们这边就是修改一下配置，调整迁移的库所在数据库服务器的地址

　　重新发布系统，上线，原先的路由规则变都不用变，直接可以基于2倍的数据库服务器的资源，继续进行线上系统的提供服务

 

转自：中华石杉Java工程师面试突击