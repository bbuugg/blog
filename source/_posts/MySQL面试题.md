---
title: MySQL面试题
date: 2021-10-06 10:19:15
tags:
---

1. 唯一索引比普通索引快吗, 为什么

   唯一索引不一定比普通索引快, 还可能慢。

<!-- more -->

   查询时, 在未使用 limit 1 的情况下, 在匹配到一条数据后, 唯一索引即返回, 普通索引会继续匹配下一条数据, 发现不匹配后返回. 如此看来唯一索引少了一次匹配, 但实际上这个消耗微乎其微.

   更新时, 这个情况就比较复杂了. 普通索引将记录放到 change buffer 中语句就执行完毕了. 而对唯一索引而言, 它必须要校验唯一性, 因此, 必须将数据页读入内存确定没有冲突, 然后才能继续操作. 对于写多读少的情况, 普通索引利用 change buffer 有效减少了对磁盘的访问次数, 因此普通索引性能要高于唯一索引。

2. MySQL由哪些部分组成, 分别用来做什么

一. Server

    连接器: 管理连接, 权限验证.
    分析器: 词法分析, 语法分析.
    优化器: 执行计划生成, 索引的选择.
    执行器: 操作存储引擎, 返回执行结果.

二. 存储引擎: 存储数据, 提供读写接口。

3. MySQL查询缓存有什么弊端, 应该什么情况下使用, 8.0版本对查询缓存有什么变更

查询缓存可能会失效非常频繁, 对于一个表, 只要有更新, 该表的全部查询缓存都会被清空. 因此对于频繁更新的表来说, 查询缓存不一定能起到正面效果.对于读远多于写的表可以考虑使用查询缓存.8.0版本的查询缓存功能被删了 (￣.￣)。
4.MyISAM和InnoDB的区别有哪些

    InnoDB支持事务, MyISAM不支持；
    InnoDB支持行级锁, MyISAM支持表级锁；
    InnoDB支持多版本并发控制(MVVC), MyISAM不支持；
    InnoDB支持外键, MyISAM不支持；
    MyISAM支持全文索引, InnoDB部分版本不支持(但可以使用Sphinx插件)；

5.MySQL怎么恢复半个月前的数据

通过整库备份+binlog进行恢复. 前提是要有定期整库备份且保存了binlog日志
6.MySQL事务的隔离级别, 分别有什么特点

    读未提交(RU): 一个事务还没提交时, 它做的变更就能被别的事务看到.
    读提交(RC): 一个事务提交之后, 它做的变更才会被其他事务看到.
    可重复读(RR): 一个事务执行过程中看到的数据, 总是跟这个事务在启动时看到的数据是一致的. 当
    然在可重复读隔离级别下, 未提交变更对其他事务也是不可见的.
    串行化(S): 对于同一行记录, 读写都会加锁. 当出现读写锁冲突的时候, 后访问的事务必须等前一个事务执行完成才能继续执行

7. 做过哪些MySQL索引相关优化

尽量使用主键查询:

    聚簇索引上存储了全部数据, 相比普通索引查询, 减少了回表的消耗.MySQL5.6之后引入了索引下推优化, 通过适当的使用联合索引, 减少回表判断的消耗.若频繁查询某一列数据, 可以考虑利用覆盖索引避免回表.联合索引将高频字段放在最左边。

8. 简要说一下数据库范式

   第一范式: 属性不可再分。
   第二范式: 在一范式的基础上, 要求数据库表中的每个实例或行必须可以被惟一地区分. 通常需要为表加上一个列, 以存储各个实例的惟一标识. 这个惟一属性列被称为主关键字或主键。
   第三范式: 在二范式的基础上, 要求一个数据库表中不包含已在其它表中已包含的非主关键字信息。

所以第三范式具有如下特征：1). 每一列只有一个值. 2). 每一行都能区分. 3). 每一个表都不包含其他表已经包含的非主关键字信息。

9. 一千万条数据的表, 如何分页查询

数据量过大的情况下, limit offset 分页会由于扫描数据太多而越往后查询越慢. 可以配合当前页最后一条ID进行查询, SELECT * FROM T WHERE id &gt; #{ID} LIMIT #{LIMIT} . 当然, 这种情况下ID必须是有序的, 这也是有序ID的好处之一。

10. 订单表数据量越来越大导致查询缓慢, 如何处理

分库分表. 由于历史订单使用率并不高, 高频的可能只是近期订单, 因此, 将订单表按照时间进行拆分, 根据数据量的大小考虑按月分表或按年分表. 订单ID最好包含时间(如根据雪花算法生成), 此时既能根据订单ID直接获取到订单记录, 也能按照时间进行查询。
MySQL基础

在这里插入图片描述

1. 一张表里面有 ID 自增主键当 当insert 了17 条记录之后 ，删除了第 15,16,17 条记录 ， 再把Mysql 重启 ，再insert 一条记录，这条记录的 ID 是18还是15 ？

   如果表的类型是MyISAM，那么是18。因为MyISAM表会把自增主键的最大ID记录到内存中，所以重启数据库或者是对表进行OPTIMIZE操作，都会导致最大ID丢失。

2 .Mysql 的技术特点是什么？

    Mysql 数据库软件是一个客户端或服务器系统，其中包括：支持各种客户端程序和库的多线程 SQL 服务器、不同的后端、广泛的应用程序编程接口和管理工具。

3.Heap 表是什么？

HEAP 表存在于内存中，用于临时高速存储。

    BLOB 或 TEXT 字段是不允许的
    只能使用比较运算符=，&lt;，&gt;，=&gt;，= &lt;
    HEAP 表不支持 AUTO_INCREMENT
    索引不可为 NULL

4.Mysql 服务器默认端口是什么？

Mysql 服务器的默认端口是 3306。
5.与 Oracle 相比，Mysql 有什么优势？

    Mysql 是开源软件，随时可用，无需付费。
    Mysql 是便携式的
    带有命令提示符的 GUI。
    使用 Mysql 查询浏览器支持管理

6.如何区分FLOAT和DOUBLE ？

以下是 FLOAT 和 DOUBLE 的区别：

    浮点数以 8 位精度存储在 FLOAT 中，并且有四个字节。
    浮点数存储在 DOUBLE 中，精度为 18 位，有八个字节。

7.区分 CHAR_LENGTH 和 和 LENGTH

CHAR_LENGTH 是字符数，而 LENGTH 是字节数。Latin 字符的这两个数据是相同的，但是对于 Unicode 和其他编码，它们是不同的。
8.在 Mysql 中 ENUM 的用法是什么？

ENUM 是一个字符串对象，用于指定一组预定义的值，并可在创建表时使用。
Create table size(name ENUM(&#039;Smail,&#039;Medium&#039;,&#039;Large&#039;);
9.如何定义 REGEXP ？

REGEXP 是模式匹配，其中匹配模式在搜索值的任何位置。
10 .CHAR 和 和 VARCHAR 的区别？

以下是 CHAR 和 VARCHAR 的区别：

    CHAR 和 VARCHAR 类型在存储和检索方面有所不同
    CHAR 列长度固定为创建表时声明的长度，长度值范围是 1 到 255当 CHAR 值被存储时，它们被用空格填充到特定长度，检索 CHAR 值时需删除尾随空格。

11.列的字符串类型可以是什么？

字符串类型是：

    SET
    BLOB
    ENUM
    CHAR
    TEXT
    VARCHAR

12.如何获取当前的 l Mysql 版本？

SELECT VERSION();用于获取当前 Mysql 的版本。

13. Mysql 中使用什么存储引擎？

存储引擎称为表类型，数据使用各种技术存储在文件中。
技术涉及：

    Storage mechanism
    Locking levels
    Indexing
    Capabilities and functions.

14.Mysql 驱动程序是什么？

以下是 Mysql 中可用的驱动程序：

    PHP 驱动程序
    JDBC 驱动程序
    ODBC 驱动程序
    CWRAPPER
    PYTHON 驱动程序
    PERL 驱动程序
    RUBY 驱动程序
    CAP11PHP 驱动程序
    Ado.net5.mxj

15.TIMESTAMP 在 在 UPDATE P CURRENT_TIMESTAMP 数据类型上做什么？

创建表时 TIMESTAMP 列用 Zero 更新。只要表中的其他字段发生更改，UPDATE
CURRENT_TIMESTAMP 修饰符就将时间戳字段更新为当前时间。
16.主键和候选键有什么区别？

表格的每一行都由主键唯一标识,一个表只有一个主键。主键也是候选键。按照惯例，候选键可以被指定为主键，并且可以用于任何外键引用。
17.如何使用 Unix l shell 登录 Mysql ？

我们可以通过以下命令登录：
18.myisamchk 是用来做什么的？

它用来压缩 MyISAM 表，这减少了磁盘或内存使用。
19.如何控制 HEAP 表的最大尺寸？

Heal 表的大小可通过称为 max_heap_table_size 的 Mysql 配置变量来控制。

20. MyISAM Static 和 和 MyISAM Dynamic 有什么区别？

在 MyISAM Static 上的所有字段有固定宽度。动态 MyISAM 表将具有像 TEXT，BLOB等字段，以适应不同长度的数据类型。MyISAM Static 在受损情况下更容易恢复。
21.federated 表是什么？

federated 表，允许访问位于其他服务器数据库上的表。
22.如果一个表有一列定义为 TIMESTAMP ，将发生什么？

每当行被更改时，时间戳字段将获取当前时间戳。

23. 列设置为 AUTO INCREMENT 时，如果在表中达到最大值，会发生什么情况？

它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。
24.怎样才能找出最后一次插入时分配了哪个自动增量？

LAST_INSERT_ID 将返回由 Auto_increment分配的最后一个值，并且不需要指定表名
称。
25.你怎么看到为表格定义的所有索引？

索引是通过以下方式为表格定义的：
sqlqSHOW INDEX FROM &lt;tablename&gt;;

26. LIKE 声明中的％和_ 是什么意思？

％对应于 0 个或更多字符，_只是 LIKE 语句中的一个字符。
27.如何在 x Unix 和 和 l Mysql 时间戳之间进行转换？

UNIX_TIMESTAMP 是从 Mysql 时间戳转换为 Unix 时间戳的命令
FROM_UNIXTIME 是从 Unix 时间戳转换为 Mysql 时间戳的命令
28.列对比运算符是什么？

在 SELECT 语句的列比较中使用=，&lt;&gt;，&lt;=，&lt;，&gt; =，&gt;，&lt;&lt;，&gt;&gt;，&lt;=&gt;，AND，OR 或LIKE 运算符。
29.我们如何得到受查询影响的行数？

行数可以通过以下代码获得：
SELECT COUNT(user_id)FROM users;
30.Mysql 查询是否区分大小写？

不区分

所有这些例子都是一样的，Mysql 不区分大小写。
31.LIKE 和 REGEXP 操作有什么区别？

LIKE 和 REGEXP 运算符用于表示^和％。
SELECT * FROM employee WHERE emp_name REGEXP &quot;^b&quot;;
SELECT * FROM employee WHERE emp_name LIKE &quot;%b&quot;;

32. BLOB 和 和 TEXT 有什么区别？

BLOB 是一个二进制对象，可以容纳可变数量的数据。有四种类型的 BLOB

    TINYBLOB
    BLOB
    MEDIUMBLOB
    LONGBLOB

它们只能在所能容纳价值的最大长度上有所不同。TEXT 是一个不区分大小写的 BLOB。四种 TEXT 类型

    TINYTEXT
    TEXT
    MEDIUMTEXT
    LONGTEXT

它们对应于四种 BLOB 类型，并具有相同的最大长度和存储要求。BLOB 和 TEXT 类型之间的唯一区别在于对 BLOB 值进行排序和比较时区分大小写，对TEXT 值不区分大小写。
33.mysql_fetch_array 和 和 mysql_fetch_object 的区别是什么？

以下是 mysql_fetch_array 和 mysql_fetch_object 的区别：

    mysql_fetch_array（） - 将结果行作为关联数组或来自数据库的常规数组返回。
    mysql_fetch_object - 从数据库返回结果行作为对象。

34.我们如何在 mysql 中运行批处理模式？

以下命令用于在批处理模式下运行：
35.MyISAM 表格将在哪里存储，并且还提供其存储格式？

每个 MyISAM 表格以三种格式存储在磁盘上：

    “.frm”文件存储表定义
    数据文件具有“.MYD”（MYData）扩展名
    索引文件具有“.MYI”（MYIndex）扩展名

36. Mysql 中有哪些不同的表格？

共有 5 种类型的表格：

    MyISAM
    Heap
    Merge
    INNODB
    ISAM

MyISAM 是 Mysql 的默认存储引擎。

37. SAM 是什么？

ISAM 简称为索引顺序访问方法。它是由 IBM 开发的，用于在磁带等辅助存储系统上存储和检索数据。
38.Mysql 如何优化 DISTINCT ？

DISTINCT 在所有列上转换为 GROUP BY，并与 ORDER BY 子句结合使用。
SELECT DISTINCT t1.a FROM t1,t2 where t1.a=t2.a;
39.如何输入字符为十六进制数字？

如果想输入字符为十六进制数字，可以输入带有单引号的十六进制数字和前缀（X），或者只用（Ox）前缀输入十六进制数字。如果表达式上下文是字符串，则十六进制数字串将自动转换为字符串。
40.如何显示前 0 50 行？

在 Mysql 中，使用以下代码查询显示前 50 行：
SELECT*FROM xx LIMIT 0,50;
41.可以使用多少列创建索引？

任何标准表最多可以创建 16 个索引列。
42.NOW（）和 CURRENT_DATE （）有什么区别？

NOW（）命令用于显示当前年份，月份，日期，小时，分钟和秒。
CURRENT_DATE（）仅显示当前年份，月份和日期。
43.什么样的对象可以使用 CREATE 语句创建？

以下对象是使用 CREATE 语句创建的：

    DATABASE
    EVENT
    FUNCTION
    INDEX
    PROCEDURE
    TABLE
    TRIGGER
    USER
    VIEW

44.解释访问控制列表

    ACL（访问控制列表）是与对象关联的权限列表。这个列表是 Mysql 服务器安全模型的基础，它有助于排除用户无法连接的问题。
    Mysql 将 ACL（也称为授权表）缓存在内存中。当用户尝试认证或运行命令时，Mysql 会按照预定的顺序检查 ACL 的认证信息和权限。

45.MYSQL 数据表在什么情况下容易损坏？

服务器突然断电导致数据文件损坏。强制关机，没有先关闭 mysql 服务等。
46.mysql 有关权限的表都有哪几个？

Mysql 服务器通过权限表来控制用户对数据库的访问，权限表存放在 mysql 数据库里，由mysql_install_db 脚本初始化。这些权限表分别 user，db，table_priv，columns_priv和 host。
MySQL中级
1.MySQL 中有哪几种锁？

    表级锁： 开销小， 加锁快； 不会出现死锁； 锁定粒度大， 发生锁冲突的概率最高， 并发度最低。
    行级锁： 开销大， 加锁慢； 会出现死锁； 锁定粒度最小， 发生锁冲突的概率最低， 并发度也最高。
    页面锁： 开销和加锁时间界于表锁和行锁之间； 会出现死锁； 锁定粒度界于表锁和行锁之间， 并发度一般。

2.MySQL 中有哪些不同的表格？

    共有 5 种类型的表格： 1、MyISAM2、Heap 3、Merge 4、INNODB 5、MISAM

3.简述在MySQL 数据库中 MyISAM 和InnoDB 的区别

MyISAM：

    不支持事务， 但是每次查询都是原子的； 支持表级锁， 即每次操作是对整个表加锁； 存储表的总行数；一个 MYISAM 表有三个文件： 索引文件、表结构文件、数据文件；采用菲聚集索引， 索引文件的数据域存储指向数据文件的指针。辅索引与主索引基本一致， 但是辅索引不用保证唯一性。

InnoDb：

    支持 ACID 的事务， 支持事务的四种隔离级别； 支持行级锁及外键约束： 因此可以支持写并发； 不存储总行数：一个 InnoDb 引擎存储在一个文件空间（ 共享表空间， 表大小不受操作系统控制，一个表可能分布在多个文件里）， 也有可能为多个（ 设置为独立表空， 表大小受操作系统文件大小限制， 一般为 2G）， 受操作系统文件大小的限制；主键索引采用聚集索引（ 索引的数据域存储数据文件本身）， 辅索引的数据域存储主键的值； 因此从辅索引查找数据， 需要先通过辅索引找到主键值， 再访问辅索引； 最好使用自增主键， 防止插入数据时， 为维持 B+树结构， 文件的大调整。

4.MySQL 中InnoDB 支持的四种事务隔离级别名称，以及逐级之间的区别？

SQL 标准定义的四个隔离级别为：

    read uncommited ： 读到未提交数据
    read committed： 脏读， 不可重复读
    repeatable read： 可重读
    serializable ： 串行事物

5.CHAR 和VARCHAR 的区别？

    CHAR 和 VARCHAR 类型在存储和检索方面有所不同
    CHAR 列长度固定为创建表时声明的长度， 长度值范围是 1 到 255 当 CHAR 值被存储时， 它们被
    用空格填充到特定长度， 检索 CHAR 值时需删除尾随空格。

6.主键和候选键有什么区别？

表格的每一行都由主键唯一标识,一个表只有一个主键。
主键也是候选键。按照惯例， 候选键可以被指定为主键， 并且可以用于任何外键引用。
7.myisamchk 是用来做什么的？

    它用来压缩 MyISAM 表， 这减少了磁盘或内存使用。

MyISAM Static 和 MyISAM Dynamic 有什么区别？

    在 MyISAM Static 上的所有字段有固定宽度。动态 MyISAM 表将具有像 TEXT， BLOB 等字段， 以适应不同长度的数据类型。MyISAM Static 在受损情况下更容易恢复。

8.如果一个表有一列定义为TIMESTAMP，将发生什么？

    每当行被更改时， 时间戳字段将获取当前时间戳。列设置为 AUTO INCREMENT 时， 如果在表中达到最大值， 会发生什么情况？它会停止递增， 任何进一步的插入都将产生错误， 因为密钥已被使用。怎样才能找出最后一次插入时分配了哪个自动增量？LAST_INSERT_ID 将返回由 Auto_increment 分配的最后一个值， 并且不需要指定表名称。

9.你怎么看到为表格定义的所有索引？

索引是通过以下方式为表格定义的：
10.LIKE 声明中的％是什么意思？

％ 对应于 0 个或更多字符，只是 LIKE 语句中的一个字符。
11.列对比运算符是什么？

在 SELECT 语句的列比较中使用=，&lt;&gt;，&lt;=，&lt;，&gt; =，&gt;，&lt;&lt;，&gt;&gt;，&lt;=&gt;，AND， OR 或 LIKE 运算符。
12.BLOB 和TEXT 有什么区别？

BLOB 是一个二进制对象， 可以容纳可变数量的数据。TEXT 是一个不区分大小写的 BLOB。BLOB 和 TEXT 类型之间的唯一区别在于对 BLOB 值进行排序和比较时区分大小写， 对 TEXT 值不区分大小写。
13.MySQL_fetch_array 和MySQL_fetch_object 的区别是什么？

以下是 MySQL_fetch_array 和 MySQL_fetch_object 的区别：

    MySQL_fetch_array（ ） – 将结果行作为关联数组或来自数据库的常规数组返回。
    MySQL_fetch_object – 从数据库返回结果行作为对象。

14.MyISAM 表格将在哪里存储，并且还提供其存储格式？

每个 MyISAM 表格以三种格式存储在磁盘上：

    ·“.frm” 文件存储表定义
    
    ·数据文件具有“.MYD”（ MYData）
    
    扩展名索引文件具有“.MYI”（ MYIndex） 扩展名

15.如何显示前 50 行？

在 MySQL 中， 使用以下代码查询显示前 50 行：
SELECT*FROM TABLE LIMIT 0,50;
16.可以使用多少列创建索引？

任何标准表最多可以创建 16 个索引列。
17.NOW（）和 CURRENT_DATE（）有什么区别？

NOW（）: 命令用于显示当前年份， 月份， 日期， 小时， 分钟和秒。

CURRENT_DATE（）: 仅显示当前年份， 月份和日期。
18.什么是非标准字符串类型？

    TINYTEXT
    TEXT
    MEDIUMTEXT
    LONGTEXT

19.什么是通用 SQL 函数？

    CONCAT(A, B) – 连接两个字符串值以创建单个字符串输出。通常用于将两个或多个字段合并为一个字段。
    
    FORMAT(X, D)- 格式化数字 X 到 D 有效数字。
    
    CURRDATE(), CURRTIME()- 返回当前日期或时间。
    
    NOW（） – 将当前日期和时间作为一个值返回。
    
    MONTH（）， DAY（ ）， YEAR（）， WEEK（）， WEEKDAY（） – 从日期值中提取给定数据。
    
    HOUR（）， MINUTE（）， SECOND（） – 从时间值中提取给定数据。
    
    DATEDIFF（ A， B） – 确定两个日期之间的差异， 通常用于计算年龄
    
    SUBTIMES（ A， B） – 确定两次之间的差异。
    
    FROMDAYS（ INT） – 将整数天数转换为日期值。

20.MySQL 支持事务吗？

在缺省模式下，MySQL 是 autocommit 模式的，所有的数据库更新操作都会即时提交， 所以在缺省情况下， MySQL 是不支持事务的。

    但是如果你的 MySQL 表类型是使用 InnoDB Tables 或 BDB tables 的话， 你的MySQL 就可以使用事务处理,使用SETAUTOCOMMIT=0 就可以使 MySQL 允许在非 autocommit 模式， 在非autocommit 模式下，你必须使用 COMMIT 来提交你的更改，或者用 ROLLBACK 来回滚你的更改。

21.MySQL 里记录货币用什么字段类型好

NUMERIC 和 DECIMAL 类型被 MySQL 实现为同样的类型， 这在 SQL92 标准允许。他们被用于保存值， 该值的准确精度是极其重要的值， 例如与金钱有关的数据。当声明一个类是这些类型之一时， 精度和规模的能被(并且通常是)指定。

例如:

    salary DECIMAL(9,2)
    在这个例子中， 9(precision)代表将被用于存储值的总的小数位数，而 2(scale)代表将被用于存储小数
    点后的位数。因此， 在这种情况下， 能被存储在 salary 列中的值的范围是从-9999999.99 到
    9999999.99。

22.MySQL 有关权限的表都有哪几个？

MySQL 服务器通过权限表来控制用户对数据库的访问， 权限表存放在 MySQL 数据库里，由MySQL_install_db 脚本初始化。

    这些权限表分别 user，db，table_priv， columns_priv 和 host 。

23.列的字符串类型可以是什么？

字符串类型是：

    SET
    BLOB
    ENUM
    CHAR
    TEXT

24.MySQL 数据库作发布系统的存储，一天五万条以上的增量， 预计运维三年,怎么优化？

    设计良好的数据库结构， 允许部分数据冗余， 尽量避免 join 查询， 提高效率。
    选择合适的表字段数据类型和存储引擎， 适当的添加索引。
    MySQL 库主从读写分离。
    找规律分表， 减少单表中的数据量提高查询速度。
    添加缓存机制， 比如 memcached， apc等。
    不经常改动的页面， 生成静态页面。
    书写高效率的 SQL。比如 SELECT * FROM TABEL 改为 SELECT field_1, field_2, field_3 FROM
    TABLE.

25.锁的优化策略

    读写分离
    分段加锁
    减少锁持有的时间，多个线程尽量以相同的顺序去获取资源不能将锁的粒度过于细化， 不然可能会出现线程的加锁和释 放次数过多， 反而效率不如一次加一把大锁。

26.索引的底层实现原理和优化

B+树，
经过优化的 B+树 主要是在所有的叶子结点中增加了指向下一个叶子节点的指针， 因此 InnoDB 建议为大部分表使用默认自增的主键作为主索引。
27.什么情况下设置了索引但无法使用

    以“%” 开头的 LIKE 语句， 模糊匹配
    OR 语句前后没有同时使用索引
    数据类型出现隐式转化（ 如 varchar 不加单引号的话可能会自动转换为 int 型）

28.实践中如何优化 MySQL

最好是按照以下顺序优化：

    SQL 语句及索引的优化
    数据库表结构的优化
    系统配置的优化
    硬件的优化

29.优化数据库的方法

    选取最适用的字段属性，尽可能减少定义字段宽度，尽量把字段设置 NOTNULL， 例如省份, 性别 最好适用 ENUM
    使用连接(JOIN)来代替子查询
    适用联合(UNION)来代替手动创建的临时表
    事务处理
    锁定表、优化事务处理
    适用外键， 优化锁定表
    建立索引
    优化查询语句

30.简单描述 MySQL 中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）

    索引是一种特殊的文件(InnoDB 数据表上的索引是表空间的一个组成部分)， 它们包含着对数据表里所有记录的引用指针。
    
    普通索引(由关键字KEY或 INDEX定义的索引)的唯一任务是加快对数据的访问速度。普通索引允许被索引的数据列包含重复的值。如果能确定某个数据列将只包含彼此各不相同的值， 在为这个数据列创建索引的时候就应该用关键字UNIQUE 把它定义为一个唯一索引。也就是说， 唯一索引可以保证数据记录的唯一性。
    
    主键， 是一种特殊的唯一索引， 在一张表中只能定义一个主键索引， 主键用于唯一标识一条记录， 使用关键字 PRIMARY KEY 来创建。索引可以覆盖多个数据列，如像INDEX(columnA, columnB)索引，这就是联合索引。索引可以极大的提高数据的查询速度， 但是会降低插入、删除、更新表的速度， 因为在执行这些写操作时， 还要操作索引文件。

31.数据库中的事务是什么？

事务（ transaction） 是作为一个单元的一组有序的数据库操作。如果组中的所有操作都成功， 则认为事务成功， 即使只有一个操作失败， 事务也不成功。如果所有操作完成， 事务则提交， 其修改将作用于所有其他数据库进程。如果一个操作失败， 则事务将回滚， 该事务所有操作的影响都将取消。

事务特性：

        原子性： 即不可分割性， 事务要么全部被执行， 要么就全部不被执行。
        一致性或可串性：事务的执行使得数据库从一种正确状态转换成另一种正确状态。
        隔离性：在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何其他事务。
        持久性：事务正确提交后， 其结果将永久保存在数据库中， 即使在事务提交后有了其他故障， 事务的处理结果也会得到保存。
        或者这样理解：事务就是被绑定在一起作为一个逻辑工作单元的 SQL 语句分组， 如果任何一个语句操作失败那么整个操作就被失败， 以后操作就会回滚到操作前状态， 或者是上有个节点。为了确保要么执行， 要么不执行， 就可以使用事务。要将有组语句作为事务考虑， 就需要通过 ACID 测试， 即原子性， 一致性， 隔离性和持久性。

32.SQL 注入漏洞产生的原因？如何防止？

    SQL 注入产生的原因： 程序开发过程中不注意规范书写 sql 语句和对特殊字符进行过滤，导致客户端可以通过全局变量 POST 和 GET 提交一些 sql 语句正常执行。

防止 SQL 注入的方式：

    开启配置文件中的 magic_quotes_gpc 和 magic_quotes_runtime 设置
    
    执行 sql 语句时使用 addslashes 进行 sql 语句转换Sql 语句书写尽量不要省略双引号和单引号。
    
    过滤掉 sql 语句中的一些关键词：update、insert、delete、select、 * 。
    
    提高数据库表和字段的命名技巧， 对一些重要的字段根据程序的特点命名， 取不易被猜到的。

33.为表中得字段选择合适得数据类型

    字段类型优先级: 整形&gt;date,time&gt;enum,char&gt;varchar&gt;blob,text

优先考虑数字类型， 其次是日期或者二进制类型， 最后是字符串类型， 同级别得数据类型， 应该优先选择占用空间小的数据类型。
34.存储时期(日期)

    Datatime: 以 YYYY-MM-DD HH:MM:SS 格式存储时期时间， 精确到秒， 占用 8 个字节得存储空间，datatime 类型与时区无关。
    
    Timestamp: 以时间戳格式存储，占用 4 个字节，范围小 1970-1-1 到 2038-1-19， 显示依赖于所指定得时区， 默认在第一个列行的数据修改时可以自动得修改timestamp 列得值 。
    
    Date: 占用得字节数比使用字符串.datatime.int 储存要少， 使用 date 只需要 3 个字节， 存储日期月份， 还可以利用日期时间函数进行日期间的计算。
    
    Time: 存储时间部分的数据

注意:不要使用字符串类型来存储日期时间数据（ 通常比字符串占用得储存空间小， 在进行查找过滤可以利用日期得函数）使用 int 存储日期时间不如使用 timestamp 类型
35.对于关系型数据库而言，索引是相当重要的概念，请回答有关索引的几个问题

    1、索引的目的是什么？
    
    快速访问数据表中的特定信息， 提高检索速度
    创建唯一性索引， 保证数据库表中每一行数据的唯一性。加速表和表之间的连接
    使用分组和排序子句进行数据检索时， 可以显著减少查询中分组和排序的时间
    
    2、索引对数据库系统的负面影响是什么？

负面影响：

    创建索引和维护索引需要耗费时间， 这个时间随着数据量的增加而增加； 索引需要占用物理空间， 不光是表需要占用数据空间， 每个索引也需要占用物理空间；当对表进行增、删、改、的时候索引也要动态维护， 这样就降低了数据的维护速度。
    
    3、为数据表建立索引的原则有哪些？
    
    在最频繁使用的、用以缩小查询范围的字段上建立索引。 在频繁使用的、需要排序的字段上建立索引。
    
    4、什么情况下不宜建立索引？
    
    对于查询中很少涉及的列或者重复值比较多的列， 不宜建立索引。
    对于一些特殊的数据类型， 不宜建立索引， 比如文本字段（ text） 等

36.解释 MySQL 外连接、内连接与自连接的区别

先说什么是交叉连接: 交叉连接又叫笛卡尔积，它是指不使用任何条件，直接将一个表的所有记录和另一个表中的所有记录一一匹配。

内连接： 则是只有条件的交叉连接，根据某个条件筛选出符合条件的记录，不符合条件的记录不会出现在结果集中， 即内连接只连接匹配的行。

外连接： 其结果集中不仅包含符合连接条件的行，而且还会包括左表、右表或两个表中的所有数据行， 这三种情况依次称之为左外连接， 右外连接， 和全外连接。

左外连接： 也称左连接，左表为主表， 左表中的所有记录都会出现在结果集中， 对于那些在右表中并没有匹配的记录， 仍然要显示， 右边对应的那些字段值以NULL 来填充。

右外连接： 也称右连接，右表为主表，右表中的所有记录都会出现在结果集中。左连接和右连接可以互换， MySQL 目前还不支持全外连接。
37.Myql 中的事务回滚机制概述

    事务是用户定义的一个数据库操作序列， 这些操作要么全做要么全不做， 是一个不可分割的工作单位， 事务回滚是指将该事务已经完成的对数据库的更新操作撤销。
    要同时修改数据库中两个不同表时， 如果它们不是一个事务的话， 当第一个表修改完， 可能第二个表修改过程中出现了异常而没能修改， 此时就只有第二个表依旧是未修改之前的状态， 而第一个表已经被修改完毕。
    而当你把它们设定为一个事务的时候， 当第一个表修改完， 第二表修改出现异常而没能修改， 第一个表和第二个表都要回到未修改的状态， 这就是所谓的事务回滚。

38.SQL 语言包括哪几部分？每部分都有哪些操作关键字？

SQL 语言包括数据定义(DDL)、数据操纵(DML),数据控制(DCL)和数据查询（ DQL） 四个部分。

数据定义： Create Table,Alter Table,Drop Table, Craete/Drop Index
等数据操纵： Select,insert,update,delete,
数据控制：grant,revoke
数据查询：select
39.完整性约束包括哪些？

    数据完整性(Data Integrity)是指数据的精确(Accuracy)和可靠性(Reliability)。

分为以下四类：

    实体完整性： 规定表的每一行在表中是惟一的实体。
    
    域完整性： 是指表中的列必须满足某种特定的数据类型约束，其中约束又包括 取值范围、精度等规定。
    
    参照完整性： 是指两个表的主关键字和外关键字的数据应一致， 保证了表之间的数据的一致性，防止了数据丢失或无意义的数据在数据库中扩散。
    
    用户定义的完整性： 不同的关系数据库系统根据其应用环境的不同，往往还需 要一些特殊的约束条件。用户定义的完整性即是针对某个特定关系数据库的约束条件， 它反映某一具体应用必须满足的语义要求。与表有关的约束：包括列约束(NOT NULL（ 非空约束）)和表约束(PRIMARY KEY、foreign key、check、UNIQUE)。

————————————————
版权声明：本文为CSDN博主「Cs 挽周」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_45692705/article/details/119343669