<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>笔记</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="笔记"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="笔记"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="笔记"><meta property="og:type" content="blog"><meta property="og:title" content="笔记"><meta property="og:url" content="https://www.chengyao.xyz/"><meta property="og:site_name" content="笔记"><meta property="og:description" content="笔记"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.chengyao.xyz/img/og_image.png"><meta property="article:author" content="CY"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://www.chengyao.xyz/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.chengyao.xyz"},"headline":"笔记","image":["https://www.chengyao.xyz/img/og_image.png"],"author":{"@type":"Person","name":"CY"},"publisher":{"@type":"Organization","name":"笔记","logo":{"@type":"ImageObject","url":"https://www.chengyao.xyz/images/avatar.jpg"}},"description":"笔记"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/avatar.jpg" alt="笔记" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/tab-engineer"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-10T13:44:42.000Z" title="2021/3/10 下午9:44:42">2021-03-10</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">34 分钟读完 (大约5150个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/10/php%E7%AC%94%E8%AE%B0/">PHP笔记</a></h1><div class="content"><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><ol>
<li><p>iconv(‘charset in’,’charset out’,$str); mb_convert_encoding($str,’charsetout’,’charsetin’);</p>
</li>
<li><p>get_class_methods() 获取类方法，需要传递一个类名字符串 例如 People::class &#x2F; ‘People’ ，get_class_vars() 获取类属性同上 。以上两个方法只能获取类中的public属性和方法。get_object_vars()</p>
</li>
<li><p>set_exception_handler()</p>
</li>
<li><p>ord() 返回字符串首个字符的ACSCII</p>
</li>
<li><p>array_fill() 填充数组，range() 生成一个范围的数组</p>
</li>
<li><p>json_encode($arr,JSON_UNESCAPED_UNICODE) #256 将unicode转为汉字</p>
</li>
<li><p>zip_open()</p>
</li>
<li><p>strpos 这类函数需要注意判断时候使用&#x3D;&#x3D;&#x3D;false ,并且搜索值都要为字符串，数字要用引号</p>
</li>
<li><p>array_map($call,$arr) $call 只接受一个参数即数组的值 array_walk($arr,$call) $call接受两个参数即数组的值和键,preg_replace_callback() 这三个函数容易和闭包用在一起</p>
</li>
<li><p>pack()  unpack()</p>
</li>
<li><p>call_user_func() call_user_fuc_array()  第一个参数可以是数组形式的一个类&#x2F;实例的方法，例如[‘test’,’eat’] 表示test类的eat方法，或者[$a,’eat’]表示$a实例的eat方法</p>
</li>
<li><p>compact()  extract()从数组中将变量导入到符号表</p>
</li>
<li><p>php7新特性 $a??$b等同于isset($a) ? $a:$b,$a?:$b 等同于!empty($a) ? $a:$b</p>
</li>
<li><p>array_shift() array_pop() array_unshift() array_push()</p>
</li>
<li><p>array_merge_recursive() 不会对键进行覆盖而是相同键名递归组成一个数组</p>
</li>
<li><p>substr_count统计“子字符串”在“原始字符串中出现的次数</p>
</li>
<li><p>CLASS获取当前类名，get_class(对象)获取类名，get_called_class() 多用在继承的子类中获取主调类</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$class_name</span> = <span class="title function_ invoke__">get_called_class</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="built_in">self</span>::<span class="variable">$instance</span>[<span class="variable">$class_name</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>[<span class="variable">$class_name</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$instance</span>[<span class="variable">$class_name</span>] = <span class="keyword">new</span> <span class="variable">$class_name</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>[<span class="variable">$class_name</span>];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>constant() 返回一个常量的值</p>
</li>
<li><p>abs()取得绝对值</p>
</li>
<li><p>str_pad() 填补奇数位则右边优先，sprintf(”%05d”,1) 右边补零5个， sprintf(”%01.3f”,1);用一个小数点后最少三位不足三位补零，小数点前最少一位，不足一位补零的浮点数格式化后边的参数，sprintf(format,arg1,arg2,arg++) </p>
</li>
<li><p>php可变参数个数，或者使用func_get_args() func_get_arg() func_num_args()</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">...<span class="variable">$a</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">test</span>(<span class="number">10</span>,<span class="number">1</span>,<span class="number">3</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>strlen()计算的是字符串的总字节数，mb_strlen()计算字符个数；gbk中文1.5个（单个时占2个）；utf中文占1个字符（开启mbstring扩展，二是要指定字符集）。</p>
</li>
<li><p>http_build_query()函数的作用是使用给出的关联（或下标）数组生成一个经过 URL-encode 的请求字符串。</p>
</li>
<li><p>PHP中的ignore_user_abort函数是当用户关掉终端后脚本不停止仍然在执行，可以用它来实现计划任务与持续进程</p>
</li>
<li><p>eval()</p>
</li>
<li><p>unset() 引用变量时候会检查变量是否还存在引用，存在的话之销毁该变量而不销毁变量的值</p>
</li>
<li><p>realpath(‘..’) dirname()  getcwd()  </p>
</li>
<li><p>session_set_cookie_params();</p>
</li>
<li><p>获取header ：get_headers() ,$http_response_header ,stream_get_meta_data() ,curl扩展</p>
</li>
<li><p>ob_start()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">ob_start();</span><br><span class="line">echo &#x27;one&#x27;;</span><br><span class="line">$data[] = ob_get_contents();</span><br><span class="line">ob_flush();</span><br><span class="line">echo &#x27;two&#x27;;</span><br><span class="line">$data[] = ob_get_contents();</span><br><span class="line">print_r($data);</span><br></pre></td></tr></table></figure></li>
<li><p>quotemeta() 函数在字符串中某些预定义的字符前添加反斜杠。</p>
</li>
</ol>
<p>预定义的字符：</p>
<ul>
<li>句号（.）</li>
<li>反斜杠（\）</li>
<li>加号（+）</li>
<li>星号（*）</li>
<li>问号（?）</li>
<li>方括号（[]）</li>
<li>脱字号（^）</li>
<li>美元符号（$）</li>
<li>圆括号（()）</li>
</ul>
<p><strong>提示：</strong>该函数可用于转义拥有特殊意义的字符，比如 SQL 中的 ( )、[ ] 以及 * 。</p>
<p><strong>注释：</strong>该函数是二进制安全的。</p>
<h1 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h1><ol>
<li><p>缓存控制中间件</p>
</li>
<li><p>算力（也称哈希率）是比特币网络处理能力的度量单位。即为计算机（<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/CPU/120556">CPU</a>）计算哈希函数输出的速度。比特币网络必须为了安全目的而进行密集的数学和加密相关操作。 例如，当网络达到10Th&#x2F;s的哈希率时，意味着它可以每秒进行10万亿次计算。</p>
</li>
<li><p>迭代是重复反馈过程的活动，其目的通常是为了逼近所需目标或结果。每一次对过程的重复称为一次“迭代”，而每一次迭代得到的结果会作为下一次迭代的初始值。</p>
<p>重复执行一系列运算步骤，从前面的量依次求出后面的量的过程。此过程的每一次结果，都是由对前一次所得结果施行相同的运算步骤得到的。例如利用迭代法*求某一数学问题的解。</p>
<p>对计算机特定程序中需要反复执行的子程序*(一组指令)，进行一次重复，即重复执行程序中的循环，直到满足某条件为止，亦称为迭代。（php迭代器）生成器是一个简单的迭代器</p>
</li>
<li><p>URI（Uniform Resource Identifier统一资源标识符）标识抽象或者物理资源的紧凑字符串</p>
<p>URL（Uniform Resource Locator统一资源定位器）定位资源主要访问机制的字符串</p>
<p>URN（Uniform Resource Name[统一资源名称）通过特定命名空间中的唯一名称或ID来标识资源</p>
<p>例如：身份证号是URN,家庭地址就是URL。</p>
</li>
<li><p>权重：一指某一因素或指标相对于某一事物的重要程度，其不同于一般的比重，体现的不仅仅是某一因素或指标所占的百分比，强调的是因素或指标的相对重要程度，倾向于贡献度或重要性。通常，权重可通过划分多个层次指标进行判断和计算，常用的方法包括层次分析法、模糊法、模糊层次分析法和专家评价法等；二指贡献度；三指权利、大权。</p>
</li>
<li><p>汉字的ASCII</p>
<p>汉字的ASCII是负数是因为你错误使用有符号的整型观察它，它实质上不是负数。</p>
<p>相关问题细节如下：</p>
<ol>
<li><p>英文标准的ASCII码中只有128个符号，只需要7位，但是计算机分配存储的最基本单位是字节，至少是8位，因此最高位为0；</p>
</li>
<li><p>因此常见的西文符号的ASCII都是在0-127之间，无论是有符号还是无符号去观察它们，都是正的。</p>
</li>
<li><p>中文的符号远超过256个，因此用一个字节不能存储汉字，早期的GB2312采用了两个字节。</p>
</li>
<li><p>但是很麻烦的问题是一个汉字用两个字节存储在计算机中后，和两个西文字母的ASCII混淆，为了避免这个混淆，汉字两个字节的最高位都是1。</p>
</li>
<li><p>如果用有符号的数去读取一个汉字的内容，最高位的1正好和负号位置相同，因此此时就会发现汉字的内吗是负的。</p>
<p>实质上汉字应该用字符型而不是整型去读取和显示它。## 术语</p>
</li>
</ol>
</li>
</ol>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>HttpOnly可选,设置了HttpOnly属性的cookie不能使用,JavaScript 经由Document.cookie属性,XMLHttpRequest和Request APIs进行访问，以防范跨站脚本攻击(xSS)。</p>
<p>1.如何设计一个高并发的系统<br>①数据库的优化，包括合理的事务隔离级别、SQL语句优化、索引的优化使用缓存，尽量减少数据库IO</p>
<p>考虑到当前的局限性，在MySQL 5.7的生存期内将继续支持查询缓存。MySQL 8.0将不支持查询缓存，并且鼓励用户升级以使用服务器端查询重写或ProxySQL作为中间人缓存。<br><a target="_blank" rel="noopener" href="https://mysqlserverteam.com/mysql-8-0-retiring-support-for-the-query-cache/">MySQL 8.0：不再支持查询缓存</a></p>
<p>分布式数据库、分布式缓存服务器的负载均衡</p>
<ol>
<li><p>php如何实现保存网络图片（代码）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">file_exists_S3</span>(<span class="params"><span class="variable">$url</span></span>)</span></span><br><span class="line"><span class="function"> </span>&#123;    </span><br><span class="line"><span class="variable">$state</span> = @<span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$url</span>,<span class="number">0</span>,<span class="literal">null</span>,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//获取网络资源的字符内容</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$state</span>)&#123;        </span><br><span class="line"></span><br><span class="line">    <span class="variable">$filename</span> = <span class="title function_ invoke__">date</span>(<span class="string">&quot;dMYHis&quot;</span>).<span class="string">&#x27;.jpg&#x27;</span>;<span class="comment">//文件名称生成</span></span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">ob_start</span>();<span class="comment">//打开输出</span></span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">readfile</span>(<span class="variable">$url</span>);<span class="comment">//输出图片文件</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$img</span> = <span class="title function_ invoke__">ob_get_contents</span>();<span class="comment">//得到浏览器输出</span></span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">ob_end_clean</span>();<span class="comment">//清除输出并关闭</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$size</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$img</span>);<span class="comment">//得到图片大小</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$fp2</span> = @<span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>, <span class="string">&quot;a&quot;</span>);        </span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp2</span>, <span class="variable">$img</span>);<span class="comment">//向当前目录写入图片文件，并重新命名</span></span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">fclose</span>(<span class="variable">$fp2</span>);        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;        </span><br><span class="line"></span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ASCII : 0 -&gt; 48 A -&gt; 65 a -&gt; 97</p>
</li>
<li><p>是一条错误的笔记</p>
</li>
<li><p>在utf8mb4编码下英文占用1字节，一般汉字占用3字节， emoji表情占用4字节。可以使用length(字段)或者char_length(字段)查询长度</p>
</li>
<li><p>优先级 算比逻条赋[赋值大于and|or]逗 </p>
</li>
<li><p>GD库1.6.2版以前支持GIF格式，但因GIF格式使用LZW演算法牵涉专利权，因此在GD1.6.2版之后不支持GIF的格式。如果你是WINDOWS的环境，你只要进入PHP.INI文件找到extension&#x3D;php_gd2.dll，将#去除，重启APACHE即可，如果你是Linux环境，又想支持GIF，PNG，JPEG，你需要去<a target="_blank" rel="noopener" href="http://www.libpng.org/pub/png/libpng.html">下载libpng</a>，<a target="_blank" rel="noopener" href="http://www.zlib.net/">zlib</a>，以及<a target="_blank" rel="noopener" href="http://www.freetype.org/">freetype字体</a>并安装。</p>
</li>
<li><p>一般视为无差，utc是以原子时计时，更加精准，适应现代社会的精确计时。不过一般使用不需要精确到秒时，视为等同。gmt是前世界标准时，utc是现世界标准时。每年格林尼治天文台会发调时信息，基于utc。格林尼治bai标准时间（GMT，旧译“格林威治平du均时间”或“zhi格林威治标准时间”）是指位于伦敦郊区的dao皇家格林尼治天文台的标准时间，因为本初子午线被定义在通过那里的经线。UTC表示世界协调时 GMT表示东八区，中国时区，协调世界时(UTC)  英文：Coordinated Universal Time ，别称：世界统一时间，世界标准时间，国际协调时间， 协调世界时，又称世界统一时间，世界标准时间，国际协调时间，简称UTC。它从英文“Coordinated Universal Time”／法文“Temps Universel Cordonné”而来。GMT（Greenwish Mean Time 格林威治平时），这是UTC的民间名称。GMT&#x3D;UTC。</p>
</li>
<li><p>短语运算符 $a &gt; 0 &amp;&amp; echo ‘$a &gt; 0’;</p>
</li>
<li><p>用ini_set修改session.save_handler要把 “session.auto_start &#x3D; 1 改成 session.auto_start &#x3D; 0 </p>
</li>
<li><p>常量和变量的性能上的区别：简单数据类型如整数等，常量编译采用立即数方式，要快一点，也节约空间；变量采用间接寻址，慢一两个周期，需要额外空间。如果是复杂数据类型，例如字符串就差不多了。</p>
</li>
<li><p>使用系统类需要加到根空间即\线，才能调用根空间的类。或者引入use \PDO,下面就可以不写斜线。异常类也需要加斜线或者引入，出错终止需要封锁运行</p>
</li>
<li><p><code>self</code>调用静态方法时(本类)，是在子类未实例化调用之前就已经绑定完毕，所以原先在父类中指向的就是父类中的方法。而<code>static</code>是在实例化的时候才进行绑定指向的是此时实例化的类，也就是子类。</p>
</li>
<li><p>计算机字长指的是计算机一次能处理的二进制数的位数，例如16，32，64位，这样的一个数称为一个字，类似的还有双字，多字。</p>
</li>
<li><p>正数的原码法码和补码相同，负数的反码为原码除了符号位之外的数字取反之后加1，补码是为了让计算机更好的计算减法，同时统一符号位和整数位。</p>
</li>
<li><p>在不开启 持久链接 PDO::ATTR_PERSISTENT  情况下脚本结束的时候会自动关闭连接</p>
</li>
<li><p>Heredoc :PHP定界符的作用就是按照原样，包括换行格式什么的，输出在其内部的东西；2.在PHP定界符中的任何特殊字符都不需要转义；3.PHP定界符中的PHP变量会被正常的用其值来替换。这个可以用来保存大段的文本比较有用。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&lt;&lt;&lt;EOT</span></span><br><span class="line"><span class="string">	//内容</span></span><br><span class="line"><span class="string">EOT</span>; <span class="comment">//前面不能有任何空格或缩进</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>静态局部变量的初始化是在编译时进行的，因此在程序开始执行的时候就始终存在，也就是说它的生命期为整个源程序，但是其作用域仍与自动变量相同。在定义时用常量或者常量表达式进行赋值。未赋值编译时系统自动赋值为0。静态局部变量具有可继承性。 </p>
</li>
<li><p>TP数据库操作，Db类插入数据的insert里第二个参数，传入ture，怎么做到有数据就更新，没有数据就插入</p>
<p>replace into 跟 insert 功能类似，不同点在于：replace into 首先尝试插入数据到表中，如果发现表中已经有此行数据（根据主键或者唯一索引判断）则先删除此行数据，然后插入新的数据。 否则，直接插入新数据。<br>要注意的是：插入数据的表必须有主键或者是唯一索引！否则的话，replace into 会直接插入数据，这将导致表中出现重复的数据。</p>
</li>
</ol>
<h2 id="PHP静态类型变量的销毁"><a href="#PHP静态类型变量的销毁" class="headerlink" title="PHP静态类型变量的销毁"></a>PHP静态类型变量的销毁</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$_instance</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$_props</span> = [];</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&#x27;666&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="built_in">self</span>::<span class="variable">$_instance</span>)) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$_instance</span> = <span class="keyword">new</span> <span class="built_in">self</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$_instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setProperty</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$val</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;_props[<span class="variable">$key</span>] = <span class="variable">$val</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getProperty</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;_props[<span class="variable">$key</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$t1</span> = <span class="title class_">Teacher</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line"><span class="variable">$t1</span>-&gt;<span class="title function_ invoke__">setProperty</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;lily&#x27;</span>);</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$t1</span>);</span><br><span class="line"><span class="comment">//var_dump($t1);</span></span><br><span class="line"><span class="variable">$t2</span> = <span class="title class_">Teacher</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$t2</span>-&gt;<span class="title function_ invoke__">getProperty</span>(<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>上例代码中虽然unset了$t1但是$t2仍能取到name的值。但如果不是单例模式是动态的对象存储时则不行。</p>
<p>如果在函数中 <strong>unset()</strong> 一个静态变量，那么在函数内部此静态变量将被销毁。但是，当再次调用此函数时，此静态变量将被复原为上次被销毁之前的值。来源：<a target="_blank" rel="noopener" href="http://php.net/manual/zh/function.unset.php">http://php.net/manual/zh/function.unset.php</a></p>
<p>所以，我们要注销一个静态变量，需要重新静态定义该变量为null。</p>
<p>参考如下 ：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$test</span>;</span><br><span class="line">    <span class="variable">$test</span>++;</span><br><span class="line">    <span class="keyword">echo</span>(<span class="variable">$test</span> . <span class="string">&quot; &quot;</span>); <span class="comment">//1</span></span><br><span class="line">    <span class="keyword">unset</span>(<span class="variable">$test</span>);</span><br><span class="line">    <span class="variable">$test</span> = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">echo</span>(<span class="variable">$test</span> . <span class="string">&quot; &quot;</span>);  <span class="comment">//2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">test</span>();</span><br><span class="line"><span class="title function_ invoke__">test</span>();</span><br><span class="line"><span class="title function_ invoke__">test</span>();</span><br></pre></td></tr></table></figure>

<p>输出 ：1 2 2 2 3 2</p>
<p>因为每次定义static $test时被销毁的值被重新拿了回来并继续向下+1；而下方的$test在函数结束一次调用后即被销毁。</p>
<p>##获取文件格式码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line"><span class="variable">$bin</span> = <span class="title function_ invoke__">fread</span>(<span class="variable">$file</span>, <span class="number">2</span>); <span class="comment">//只读2字节</span></span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$file</span>);</span><br><span class="line"><span class="variable">$strInfo</span> = @<span class="title function_ invoke__">unpack</span>(<span class="string">&quot;C2chars&quot;</span>, <span class="variable">$bin</span>);</span><br><span class="line"><span class="variable">$typeCode</span> = <span class="title function_ invoke__">intval</span>(<span class="variable">$strInfo</span>[<span class="string">&#x27;chars1&#x27;</span>].<span class="variable">$strInfo</span>[<span class="string">&#x27;chars2&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<h2 id="bindParam和bindValue的区别"><a href="#bindParam和bindValue的区别" class="headerlink" title="bindParam和bindValue的区别"></a>bindParam和bindValue的区别</h2><ol>
<li><p>PDOStatement::bindParam不能绑定常量，而bindValue可以绑定常量 如 $stm-&gt;bindParam(“:sex”,$sex); &#x2F;&#x2F;正确  $stm-&gt;bindParam(“:sex”,”female”); &#x2F;&#x2F;错误  $stm-&gt;bindValue(“:sex”,$sex); &#x2F;&#x2F;正确  $stm-&gt;bindValue(“:sex”,”female”); &#x2F;&#x2F;正确</p>
</li>
<li><p>bindParam 变量被以引用方式绑定到点位符上,而且仅仅当调用PDOStatement::execute()时才会去计算具体被绑定变量在PDOStatement::execute()被调用时的值. 例如，使用bindParam方式：</p>
</li>
</ol>
<p>bindColumn bindValue bindParam</p>
<p>bindparam只能传递引用，而bindvalue可以传递值或者引用</p>
<h2 id="sprintf"><a href="#sprintf" class="headerlink" title="sprintf()"></a>sprintf()</h2><p>参数 <em>format</em> 是转换的格式，以百分比符号 (“%”) 开始到转换字符结束。下面的可能的 <em>format</em>值：</p>
<ul>
<li>%% - 返回百分比符号</li>
<li>%b - 二进制数</li>
<li>%c - 依照 ASCII 值的字符</li>
<li>%d - 带符号十进制数</li>
<li>%e - 可续计数法（比如 1.5e+3）</li>
<li>%u - 无符号十进制数</li>
<li>%f - 浮点数(local settings aware)</li>
<li>%F - 浮点数(not local settings aware)</li>
<li>%o - 八进制数</li>
<li>%s - 字符串</li>
<li>%x - 十六进制数（小写字母）</li>
<li>%X - 十六进制数（大写字母）</li>
</ul>
<p>arg1, arg2, ++ 等参数将插入到主字符串中的百分号 (%) 符号处。该函数是逐步执行的。在第一个 % 符号中，插入 arg1，在第二个 % 符号处，插入 arg2，依此类推。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>   </span><br><span class="line"><span class="variable">$number</span> = <span class="number">123</span>;</span><br><span class="line"><span class="variable">$txt</span> = <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%f&quot;</span>,<span class="variable">$number</span>); </span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$txt</span>;</span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure>


<p>\3. 格式数字 number_format()</p>
<p>保留两位小数并且四舍五入</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$num</span> = <span class="number">123213.8889</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%.2f&quot;</span>, <span class="variable">$num</span>);</span><br></pre></td></tr></table></figure>

<p>   保留两位小数并且不四舍五入</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$num</span> = <span class="number">123213.666666</span>;   </span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%.2f&quot;</span>,<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%.3f&quot;</span>, <span class="variable">$num</span>), <span class="number">0</span>, -<span class="number">2</span>));  </span><br></pre></td></tr></table></figure>

<p>php进一法取整</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">ceil</span>(<span class="number">4.3</span>);    <span class="comment">// 5   </span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">ceil</span>(<span class="number">9.999</span>);  <span class="comment">// 10  </span></span><br></pre></td></tr></table></figure>

<p>php舍去法，取整数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">floor</span>(<span class="number">4.3</span>);   <span class="comment">// 4 </span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">floor</span>(<span class="number">9.999</span>); <span class="comment">// 9  </span></span><br></pre></td></tr></table></figure>

<p>预定义接口</p>
<p><code>Traversable</code> 可遍历接口<br><code>Countable</code> 可count接口</p>
<h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><p>XSS又叫CSS（cross-site script）,跨站脚本攻击。恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页时，嵌入其中Web里面的html代码会被执行，从而达到恶意用户的特殊目的</p>
<h5 id="办法：htmlspecialchars"><a href="#办法：htmlspecialchars" class="headerlink" title="办法：htmlspecialchars()"></a>办法：<code>htmlspecialchars()</code></h5><p><code>htmlspecialchars()</code>把一些预定义的字符转换为html实体。</p>
<h3 id="PHP包含"><a href="#PHP包含" class="headerlink" title="PHP包含"></a>PHP包含</h3><h4 id="include和require"><a href="#include和require" class="headerlink" title="include和require"></a>include和require</h4><p>include与require语句用于在执行流中插入卸载其他文件中的有用的代码。<br>include和require除了处理错误的方式不同之外，在其他地方都是相同的</p>
<ul>
<li>require生成一个致命错误(E_COMPILE_ERROR),在错误发生后脚本会停止执行</li>
<li>include生成一个警告(E_WARNING)，在错误发生后脚本会继续执行</li>
</ul>
<h5 id="include-once及require-once只引入一次，且使用后失效，多次引入也只能使用一次"><a href="#include-once及require-once只引入一次，且使用后失效，多次引入也只能使用一次" class="headerlink" title="include_once及require_once只引入一次，且使用后失效，多次引入也只能使用一次"></a><code>include_once</code>及<code>require_once</code>只引入一次，且使用后失效，多次引入也只能使用一次</h5><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>cookie常用于识别用户。是一种服务器留在用户计算机上的小文件，当同一台计算机通过浏览器请求页面时，这台计算机将会发送cookie<br>创建Cookie:<code>setcookie(name,value,expire,path,domain)</code><br>取回cookie的值：<code>$_COOKIE</code><br>使用 <code>isset()</code>函数确认是否已经设置了cookie</p>
<h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><p>session变量用于存储关于用户会话(session)的信息，或者更改用户会话的设置。<br>session变量存储单一用户的信息，并对于应用程序中所有页面都是可用的。<br>session通过在服务器生存储用户信息以便随后使用，会话信息是临时的，在用户离开网站后将被删除。<br>session工作机制：为每个访客创建一个唯一的id（UID），并基于这个UID来存储变量。UID存储在cookie中，或者通过URL进行传导<br>开启session:<code>session_start()</code><br>存储和获得session变量：<code>$_SESSION</code><br>销毁session：<code>unset()</code>或者<code>session_destroy()</code>（session_destroy彻底重置session，将失去所有的session数据）</p>
<h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><h4 id="基本的错误处理-使用die-函数"><a href="#基本的错误处理-使用die-函数" class="headerlink" title="基本的错误处理:使用die()函数"></a>基本的错误处理:使用die()函数</h4><h4 id="创建自定义错误处理器"><a href="#创建自定义错误处理器" class="headerlink" title="创建自定义错误处理器"></a>创建自定义错误处理器</h4><p>语法：<br><code>error_function(error_level,error_message,error_file,error_line,error_context)</code></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">error_level</td>
<td align="left">必需。为用户定义的错误规定错误报告级别</td>
</tr>
<tr>
<td align="left">error_message</td>
<td align="left">必需。为用户定义的错误规定错误消息</td>
</tr>
<tr>
<td align="left">error_file</td>
<td align="left">可选。规定错误发声的文件名</td>
</tr>
<tr>
<td align="left">error_line</td>
<td align="left">可选。规定错误发生的行号</td>
</tr>
<tr>
<td align="left">error_context</td>
<td align="left">可选。规定一个数组，包含了当错误发生时在用的每个变量和值</td>
</tr>
</tbody></table>
<h4 id="设置错误处理程序"><a href="#设置错误处理程序" class="headerlink" title="设置错误处理程序"></a>设置错误处理程序</h4><p>PHP的默认错误处理程序是内建的错误处理程序。可以修改错误处理程序，使其仅应用到某些错误，这样脚本就能以不同的方式处理不同的错误。<br><code>set_error_handler(eorr_name,error_level)</code></p>
<h4 id="错误记录"><a href="#错误记录" class="headerlink" title="错误记录"></a>错误记录</h4><p>默认情况下，根据在php.ini中的error_log配置，使用error_log()函数，可以向指定文件或远程目的地发送错误记录</p>
<h3 id="Exception"><a href="#Exception" class="headerlink" title="Exception"></a>Exception</h3><p>异常处理用于在指定的错误发生时改变脚本的正常流程。<br>当异常发生时，通常会：</p>
<ul>
<li>当前代码状态被保存</li>
<li>代码执行被切换到预定义（自定义）的异常处理器函数</li>
<li>根据情况，处理其也会从保存的代码状态重新开始执行代码，种植脚本执行，或从代码中另外的位置继续执行脚本</li>
</ul>
<p><strong>注意</strong>：异常应该仅仅在错误情况下使用，而不应该用在一个指定的点跳转到代码的另一个位置</p>
<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><p>过滤器用于验证和过滤来自非安全来源的数据<br>测试、验证和过滤用户输入或自定义数据是任何Web应用程序的重要组成部分</p>
<h4 id="为什么使用过滤器？"><a href="#为什么使用过滤器？" class="headerlink" title="为什么使用过滤器？"></a>为什么使用过滤器？</h4><p>几乎所有的Web应用程序都以来外部的输入。这些数据通常来自用户或其他应用程序。通过使用过滤器，能够保证应用程序获取正确的输入类型。<br>什么是外部数据？</p>
<ul>
<li>来自表单的输入数据</li>
<li>Cookies</li>
<li>Web services data</li>
<li>服务器变量</li>
<li>数据库查询结果</li>
</ul>
<h4 id="函数和过滤器"><a href="#函数和过滤器" class="headerlink" title="函数和过滤器"></a>函数和过滤器</h4><p>过滤变量，函数：</p>
<ul>
<li><code>filter_var()</code>通过一个指定的过滤器来过滤单一的变量</li>
<li><code>filter_var_array()</code>通过相同或不同的顾虑其来过滤多个变量</li>
<li><code>filter_input</code>获取一个输入变量，并对它进行过滤</li>
<li><code>filter_input_array</code>获取多个输入变量，并通过相同的或不同的过滤器对它们进行过滤</li>
</ul>
<h4 id="Validating-和-Sanitizing"><a href="#Validating-和-Sanitizing" class="headerlink" title="Validating 和 Sanitizing"></a>Validating 和 Sanitizing</h4><p>Validating过滤器：</p>
<ul>
<li>用于验证用户输入</li>
<li>严格的格式规则</li>
<li>成功则返回预期的类型，否则返回false</li>
</ul>
<p>Sanlitizing过滤器：</p>
<ul>
<li>用于允许或禁止字符串中指定的字符</li>
<li>无数据格式规则</li>
<li>始终返回字符串</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://blog.kaiot.xyz/read/52.html">http://blog.kaiot.xyz/read/52.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-07T14:52:13.000Z" title="2021/3/7 下午10:52:13">2021-03-07</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">3 分钟读完 (大约507个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/07/PHP%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E6%98%AF%E4%B8%8D%E6%98%AF%E5%9B%BE%E7%89%87/">PHP判断文件是不是图片</a></h1><div class="content"><p>&gt; php判断文件是不是图片的方法：1、利用getimagesize函数获取图片信息，然后进行判断；2、读取图片的前2个字节，然后进行判断；3、利用exif_imagetype函数实现判断。</p>
<h1 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h1><p>利用 <code>getimagesize</code> 函数获取图片信息，然后进行判断：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;?php</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Author @ Huoty</span></span><br><span class="line"><span class="comment">* Date @ 2015-11-24 16:59:26</span></span><br><span class="line"><span class="comment">* Brief @</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isImage</span>(<span class="params"><span class="variable">$filename</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$types</span> = <span class="string">&#x27;.gif|.jpeg|.png|.bmp&#x27;</span>; <span class="comment">//定义检查的图片类型</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$info</span> = @<span class="title function_ invoke__">getimagesize</span>(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$ext</span> = <span class="title function_ invoke__">image_type_to_extension</span>(<span class="variable">$info</span>[<span class="string">&#x27;2&#x27;</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">stripos</span>(<span class="variable">$types</span>, <span class="variable">$ext</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">isImage</span>(<span class="string">&#x27;isimg.txt&#x27;</span>) !== <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">isImage</span>(<span class="string">&#x27;1.jpg&#x27;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;是图片&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;不是图片&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&amp;gt;</span><br></pre></td></tr></table></figure>

<h1 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h1><p>读取图片的前 2 个字节，然后判断是不是图片：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;?php</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Author @ Huoty</span></span><br><span class="line"><span class="comment">* Date @ 2015-11-25 16:42:38</span></span><br><span class="line"><span class="comment">* Brief @</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断上传的是不是图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isImg</span>(<span class="params"><span class="variable">$fileName</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$fileName</span>, &amp;quot;rb&amp;quot;);</span><br><span class="line">    <span class="variable">$bin</span> = <span class="title function_ invoke__">fread</span>(<span class="variable">$file</span>, <span class="number">2</span>); <span class="comment">// 只读2字节</span></span><br><span class="line">    <span class="title function_ invoke__">fclose</span>(<span class="variable">$file</span>);</span><br><span class="line">    <span class="variable">$strInfo</span> = @<span class="title function_ invoke__">unpack</span>(&amp;quot;C2chars&amp;quot;, <span class="variable">$bin</span>);</span><br><span class="line">    <span class="variable">$typeCode</span> = <span class="title function_ invoke__">intval</span>(<span class="variable">$strInfo</span>[<span class="string">&#x27;chars1&#x27;</span>] . <span class="variable">$strInfo</span>[<span class="string">&#x27;chars2&#x27;</span>]);</span><br><span class="line">    <span class="variable">$fileType</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$typeCode</span> == <span class="number">255216</span> <span class="comment">/*jpg*/</span> || <span class="variable">$typeCode</span> == <span class="number">7173</span> <span class="comment">/*gif*/</span> || <span class="variable">$typeCode</span> == <span class="number">13780</span> <span class="comment">/*png*/</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$typeCode</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// echo &#x27;&amp;quot;仅允许上传jpg/jpeg/gif/png格式的图片！&#x27;;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">isImg</span>(&amp;quot;<span class="number">1</span>.jpg&amp;quot;)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> &amp;quot;是图片&amp;quot;;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> &amp;quot;不是图片&amp;quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&amp;gt;</span><br></pre></td></tr></table></figure>

<h1 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h1><p>最后一种方法是利用 exif_imagetype 函数，该函数用于判断一个图像的类型，采用这种方法更加简单。读取一个图像的第一个字节并检查其签名。 如果发现了恰当的签名则返回一个对应的常量，否则返回 FALSE。返回值和 getimagesize() 返回的数组中的索引 2 的值是一样的，但该函数要快得多。</p>
<p>该函数的返回值常量定义如下：</p>
<ol>
<li>IMAGETYPE_GIF</li>
<li>IMAGETYPE_JPEG</li>
<li>IMAGETYPE_PNG</li>
<li>IMAGETYPE_SWF</li>
<li>IMAGETYPE_PSD</li>
<li>IMAGETYPE_BMP</li>
<li>IMAGETYPE_TIFF_II（Intel 字节顺序）</li>
<li>IMAGETYPE_TIFF_MM（Motorola 字节顺序）</li>
<li>IMAGETYPE_JPC</li>
<li>IMAGETYPE_JP2</li>
<li>IMAGETYPE_JPX</li>
<li>IMAGETYPE_JB2</li>
<li>IMAGETYPE_SWC</li>
<li>IMAGETYPE_IFF</li>
<li>IMAGETYPE_WBMP</li>
<li>IMAGETYPE_XBM</li>
</ol>
<p>示例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;?php</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Author @ Huoty</span></span><br><span class="line"><span class="comment">* Date @ 2015-11-25 16:53:04</span></span><br><span class="line"><span class="comment">* Brief @</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$mimetype</span> = <span class="title function_ invoke__">exif_imagetype</span>(&amp;quot;<span class="number">1</span>.jpg&amp;quot;);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$mimetype</span> == IMAGETYPE_GIF || <span class="variable">$mimetype</span> == IMAGETYPE_JPEG || <span class="variable">$mimetype</span> == IMAGETYPE_PNG || <span class="variable">$mimetype</span> == IMAGETYPE_BMP) &#123;</span><br><span class="line">    <span class="keyword">echo</span> &amp;quot;是图片&amp;quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&amp;gt;</span><br></pre></td></tr></table></figure>

<p>[原文地址](<a target="_blank" rel="noopener" href="https://www.php.cn/php-ask-460801.html">https://www.php.cn/php-ask-460801.html</a> &quot;原文地址&quot;)</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-02-13T10:40:20.000Z" title="2021/2/13 下午6:40:20">2021-02-13</time>发表</span><span class="level-item"><time dateTime="2022-09-10T15:49:57.586Z" title="2022/9/10 下午11:49:57">2022-09-10</time>更新</span><span class="level-item">14 分钟读完 (大约2157个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/02/13/composer%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">composer使用笔记</a></h1><div class="content"><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.cloud.tencent.com/composer/composer.phar</span><br><span class="line">mv composer.phar  /usr/local/bin/composer</span><br></pre></td></tr></table></figure>

<p>#更换源</p>
<blockquote>
<p>首先要分清楚是局部换源还是全局换源</p>
</blockquote>
<h2 id="1、局部换源-仅对当前项目有效"><a href="#1、局部换源-仅对当前项目有效" class="headerlink" title="1、局部换源(仅对当前项目有效)"></a>1、局部换源(仅对当前项目有效)</h2><p>在当前项目下的composer.json中添加</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;repositories&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;composer&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://packages.example.com&quot;</span> <span class="comment">//第一个源</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;composer&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://packages.example.com&quot;</span> <span class="comment">//第二个源</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://git.url&quot;</span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;path&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/php/pacakge&quot;</span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>寻找包的过程是先从第一个源中寻找，如果找不到就从第二个源中寻找，这里可以配置多个composer资源库</p>
<h2 id="2、全局换源"><a href="#2、全局换源" class="headerlink" title="2、全局换源"></a>2、全局换源</h2><p>打开命令行</p>
<h3 id="首先把默认的源给禁用掉"><a href="#首先把默认的源给禁用掉" class="headerlink" title="首先把默认的源给禁用掉"></a>首先把默认的源给禁用掉</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer config -g secure-http false</span><br></pre></td></tr></table></figure>
<h3 id="修改镜像源"><a href="#修改镜像源" class="headerlink" title="修改镜像源"></a>修改镜像源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/    # 阿里</span><br><span class="line">composer config -g repos.packagist composer https://mirrors.cloud.tencent.com/composer/ # 腾讯</span><br></pre></td></tr></table></figure>

<h3 id="更换为原来的源"><a href="#更换为原来的源" class="headerlink" title="更换为原来的源"></a>更换为原来的源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer config -g repo.packagist composer https://repo.packagist.org</span><br></pre></td></tr></table></figure>

<h3 id="修改成功后可以先查看一下配置"><a href="#修改成功后可以先查看一下配置" class="headerlink" title="修改成功后可以先查看一下配置"></a>修改成功后可以先查看一下配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer config -g -l</span><br></pre></td></tr></table></figure>
<h3 id="第二行repositories-packagist-org-url-如果是阿里的就代表成功"><a href="#第二行repositories-packagist-org-url-如果是阿里的就代表成功" class="headerlink" title="第二行repositories.packagist.org.url 如果是阿里的就代表成功"></a>第二行<code>repositories.packagist.org.url</code> 如果是阿里的就代表成功</h3><h2 id="注意"><a href="#注意" class="headerlink" title="注意:"></a>注意:</h2><p>如果修改了全局的话 就不用再去项目下修改composer.json配置文件了</p>
<p>如果当前项目的composer.json已经配置过，那会是当前项目下指定的源</p>
<p>文章来源：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/death-satan/p/12153960.html" title="composer更换源">composer更换源</a></p>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><p>composer outdated </p>
<blockquote>
<p>更新命令</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer self-update --preview</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer update -vvv</span><br></pre></td></tr></table></figure>

<blockquote>
<p>清除缓存命令</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer clearcache</span><br></pre></td></tr></table></figure>

<blockquote>
<p>更新到composer2 </p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer self-update --2 </span><br></pre></td></tr></table></figure>
<p>如果使用<code>apt</code>或者<code>yum</code>等方式安装可能需要其他方法具体见官方文档。</p>
<blockquote>
<p>搜索扩展包</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer search max/max</span><br></pre></td></tr></table></figure>
<p>#自动加载</p>
<blockquote>
<p>我们在开发项目中会经常用到第三方的类库插件，但是如果每次需要使用的时候都会在代码的某一处去引入，然后在实例化，这样做感觉很不方便，那么怎么实现自动加载呢，下面简单介绍使用composer实现自动加载：</p>
</blockquote>
<h2 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h2><p>安装地址（中国镜像）: <a target="_blank" rel="noopener" href="https://pkg.phpcomposer.com/#how-to-install-composer">https://pkg.phpcomposer.com/#how-to-install-composer</a><br>根据它的说明一步一步进行安装</p>
<h2 id="新建目录"><a href="#新建目录" class="headerlink" title="新建目录"></a>新建目录</h2><p>新建一个目录，这个目录的名称是有要求的，当你看到有提示就说名你的命名不符合要求，该目录就是后面的项目目录！</p>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>打开命令行控制台cmd,进入工作目录,运行<code>composer</code>命令：<code>composer init</code><br>之后会提示你输入一些包名，作者等信息，运行后会生成一个composer.json文件</p>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><p>执行composer install 安装会给你安装依赖，当然你的项目刚建立是没有依赖的，所以他会给你安装composer包，composer包的结构如下：</p>
<ul>
<li>vendor<ul>
<li>composer</li>
<li>autoload_classmap.php</li>
<li>autoload_namespaces.php</li>
<li>autoload_psr4.php</li>
<li>autoload_real.php</li>
<li>autoload_static.php<br>ClassLoader.php<br>installed.json<br>LICENSE<ul>
<li>autoload.php</li>
<li>composer.json</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>在你的项目中引入autoload.php就可以进行自动加载了。</p>
<p>你可能需要手动修改&#x2F;添加一些东西</p>
<h2 id="自动加载"><a href="#自动加载" class="headerlink" title="自动加载"></a>自动加载</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>打开<code>composer.json</code>文件:<br>共有四种方式：</p>
<ol>
<li>PSR-0（不推荐使用);</li>
<li>PSR-4;</li>
<li>Class-map;</li>
<li>Files;</li>
</ol>
<p>下面演示PSR-4实现自动加载：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;autoload&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;psr-4&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;app\\&quot;</span><span class="punctuation">:</span> <span class="string">&quot;../application&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>其中app\表示..&#x2F;application 目录下的类的命名空间是app</p>
<h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><p>新建src目录，在目录下创建IndexController.php,php文件内容如下:</p>
<pre><code>//设置命名空间
namespace src;
class IndexController
&#123;
    public function index()
    &#123;
        echo &#39;indexController&#39;;
    &#125;
&#125;
</code></pre>
<h2 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h2><p>在work根目录创建index.php：</p>
<pre><code>//引入vendor下的autoloas.php
require &#39;vendor/autoload.php&#39;;
//实例化对象
$index = new src\\IndexController();
//调用类中的方法
$index-&gt;index();
</code></pre>
<p>运行后会出现报错:</p>
<blockquote>
<p>class IndexController not fund</p>
</blockquote>
<p>打开控制台,进入到work文件目录,运行composer命令:</p>
<blockquote>
<p>composer dump-autoload</p>
</blockquote>
<p>在运行<code>work</code>下的<code>index.php</code>，不报错误信息说明已经成功实现自动加载了。</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>在<code>work</code>下的<code>index.php</code>文件中我们实例化IndexController类的时,格式为<code>new src\IndexController();</code>;<br>如果命名空间较长的情况下，看起来不太方便，那我们可以用<code>use</code>来引入关键字，修改index.php代码如下：</p>
<pre><code>use src\IndexController;
//引入vendor下的autoloas.php
require &#39;vendor/autoload.php&#39;;
//修改后的实例化
$index = new IndexController();
//调用类中的方法
$index-&gt;index();
</code></pre>
<p>在运行index.php结果和上面一样。<br><strong>注意：</strong>在配置完<code>composer.json</code>以后一定要运行<code>composer dump-autoload [-o] </code>不然会出现<code>class not fund;</code><br>#踩坑</p>
<p>已经安装composer，写好composer.bat，并且设置好了path，在cmd下可以正常使用，但是在git-bash里面不行，显示如下提示：</p>
<p><code>bash: composer: command not found</code></p>
<p>原因很可能是composer文件没有可执行权限，git-bash是以linux shell方式运行的，linux和windows文件权限管理方式不太一样。切换到composer文件所在目录，执行如下命令修复权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 composer.bat</span><br></pre></td></tr></table></figure>
<p>可是我发现上面的命令没有效果，这就尴尬了</p>
<p>其实真正的原因是，git-bash 不识别 composer.bat 文件，需要新建一个 composer 文件，输入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">php /path/to/composer.phar $*</span></span><br><span class="line">php `dirname $0`/composer.phar $*</span><br></pre></td></tr></table></figure>
<p><code>#!/usr/bin/env sh</code> 有个这一行，git-bash 会自动识别为可执行文件，不需要也不能使用 chmod 命令修改权限。</p>
<h1 id="忽略平台要求"><a href="#忽略平台要求" class="headerlink" title="忽略平台要求"></a>忽略平台要求</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer install --ignore-platform-reqs</span><br></pre></td></tr></table></figure>

<p>指定php版本运行composer</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php /usr/bin/composer create-project max/max .</span><br></pre></td></tr></table></figure>

<p>这里composer需要是完整路径。</p>
<h1 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h1><p><a target="_blank" rel="noopener" href="https://docs.phpcomposer.com/">https://docs.phpcomposer.com/</a></p>
<h1 id="版本约束"><a href="#版本约束" class="headerlink" title="版本约束"></a>版本约束</h1><h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><p>可以使用通配符来设置版本。1.0.<em>相当于&gt;&#x3D;1.0 &lt;1.1。<br>例子：1.0.</em></p>
<h2 id="波浪号"><a href="#波浪号" class="headerlink" title="波浪号"></a>波浪号</h2><p>我们先通过后面这个例子去解释<del>操作符的用法：</del>1.2相当于&gt;&#x3D;1.2 &lt;2.0.0，而<del>1.2.3相当于&gt;&#x3D;1.2.3 &lt;1.3.0。对于使用Semantic Versioning作为版本号标准的项目来说，这种版本约束方式很实用。例如</del>1.2定义了最小的小版本号，然后你可以升级2.0以下的任何版本而不会出问题，因为按照Semantic Versioning的版本定义，小版本的升级不应该有兼容性的问题。简单来说，<del>定义了最小的版本，并且允许版本的最后一位版本号进行升级（没懂得话，请再看一边前面的例子）。<br>例子：</del>1.2</p>
<blockquote>
<p>需要注意的是，如果<del>作用在主版本号上，例如</del>1，按照上面的说法，Composer可以安装版本1以后的主版本，但是事实上是<del>1会被当作</del>1.0对待，只能增加小版本，不能增加主版本。</p>
</blockquote>
<h2 id="折音号"><a href="#折音号" class="headerlink" title="折音号 ^"></a>折音号 ^</h2><p>^操作符的行为跟Semantic Versioning有比较大的关联，它允许升级版本到安全的版本。例如，^1.2.3相当于&gt;&#x3D;1.2.3 &lt;2.0.0，因为在2.0版本前的版本应该都没有兼容性的问题。而对于1.0之前的版本，这种约束方式也考虑到了安全问题，例如^0.3会被当作&gt;&#x3D;0.3.0 &lt;0.4.0对待。<br>例子：^1.2.3</p>
<h2 id="版本稳定性"><a href="#版本稳定性" class="headerlink" title="版本稳定性"></a>版本稳定性</h2><p>如果你没有显式的指定版本的稳定性，Composer会根据使用的操作符，默认在内部指定为-dev或者-stable。例如：</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><table>
<thead>
<tr>
<th>名称</th>
<th>实例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>不指定版本</td>
<td></td>
<td>根据当前Path环境变量中的php版本下载最合适的最新版</td>
</tr>
<tr>
<td>确切的版本</td>
<td>6.0.1</td>
<td>指定下载的具体版本号</td>
</tr>
<tr>
<td>范围 <br> &gt; <br> &lt; <br>!&#x3D;</td>
<td>&gt; 6.0，&lt; 6.0</td>
<td>指定版本范围，自动下载该范围中的最新版</td>
</tr>
<tr>
<td>通配符 *</td>
<td>5.<em>，6.0.</em></td>
<td>5.* 代表版本范围 [5, 6.0) <br> 6.0.* 代表版本范围 [6.0, 6.1)</td>
</tr>
<tr>
<td>赋值运算符（最低版本） ~</td>
<td>1.2，6.1.0</td>
<td>~1.2 代表版本范围 [1.2, 2.0) <br> ~6.1.0 代表版本范围 [6.1.0, 6.2)</td>
</tr>
<tr>
<td>脱字号版本（最低版本） ^</td>
<td>^1.2.3</td>
<td>^1.2.3 代表版本范围 [1.2.3, 2.0.0)</td>
</tr>
</tbody></table>
<h2 id="约束内部约束"><a href="#约束内部约束" class="headerlink" title="约束	内部约束"></a>约束	内部约束</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.2.3	=1.2.3.0-stable</span><br><span class="line">&gt;1.2	&gt;1.2.0.0-stable</span><br><span class="line">&gt;=1.2	&gt;=1.2.0.0-dev</span><br><span class="line">&gt;=1.2-stable	&gt;=1.2.0.0-stable</span><br><span class="line">&lt;1.3	&lt;1.3.0.0-dev</span><br><span class="line">&lt;=1.3	&lt;=1.3.0.0-stable</span><br><span class="line">1 - 2	&gt;=1.0.0.0-dev &lt;3.0.0.0-dev</span><br><span class="line">~1.3	&gt;=1.3.0.0-dev &lt;2.0.0.0-dev</span><br><span class="line">1.4.*	&gt;=1.4.0.0-dev &lt;1.5.0.0-dev</span><br></pre></td></tr></table></figure>
<p>例子：1.0 - 2.0<br>如果你想指定版本只要稳定版本，你可以在版本后面添加后缀-stable。<br>minimum-stability 配置项定义了包在选择版本时对稳定性的选择的默认行为。默认是stable。它的值如下（按照稳定性排序）：dev，alpha，beta，RC和stable。除了修改这个配置去修改这个默认行为，我们还可以通过稳定性标识（例如@stable和@dev）来安装一个相比于默认配置不同稳定性的版本。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;require&quot;: &#123;</span><br><span class="line">        &quot;monolog/monolog&quot;: &quot;1.0.*@beta&quot;,</span><br><span class="line">        &quot;acme/foo&quot;: &quot;@dev&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>版本测试: <a target="_blank" rel="noopener" href="https://semver.madewithlove.com/">https://semver.madewithlove.com/</a> ,地址可能会变更,可以参考composer官方文档</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-28T03:13:01.000Z" title="2021/1/28 上午11:13:01">2021-01-28</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">23 分钟读完 (大约3478个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/28/linux%20lsof%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/">linux lsof命令详解</a></h1><div class="content"><p>#简介<br>lsof(list open files)是一个列出当前系统打开文件的工具。在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。所以如传输控制协议 (TCP) 和用户数据报协议 (UDP) 套接字等，系统在后台都为该应用程序分配了一个文件描述符，无论这个文件的本质如何，该文件描述符为应用程序与基础操作系统之间的交互提供了通用接口。因为应用程序打开文件的描述符列表提供了大量关于这个应用程序本身的信息，因此通过lsof工具能够查看这个列表对系统监测以及排错将是很有帮助的。</p>
<p>#输出信息含义<br>在终端下输入lsof即可显示系统打开的文件，因为 lsof 需要访问核心内存和各种文件，所以必须以 root 用户的身份运行它才能够充分地发挥其功能。</p>
<p>直接输入lsof部分输出为:</p>
<pre><code>COMMAND     PID        USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME init          1        root  cwd       DIR                8,1     4096          2 / init          1        root  rtd       DIR                8,1     4096          2 / init          1        root  txt       REG                8,1   150584     654127 /sbin/init udevd       415        root    0u      CHR                1,3      0t0       6254 /dev/null udevd       415        root    1u      CHR                1,3      0t0       6254 /dev/null udevd       415        root    2u      CHR                1,3      0t0       6254 /dev/null udevd       690        root  mem       REG                8,1    51736     302589 /lib/x86_64-linux-gnu/libnss_files-2.13.so syslogd    1246      syslog    2w      REG                8,1    10187     245418 /var/log/auth.log syslogd    1246      syslog    3w      REG                8,1    10118     245342 /var/log/syslog dd         1271        root    0r      REG                0,3        0 4026532038 /proc/kmsg dd         1271        root    1w     FIFO               0,15      0t0        409 /run/klogd/kmsg dd         1271        root    2u      CHR                1,3      0t0       6254 /dev/null
</code></pre>
<p>每行显示一个打开的文件，若不指定条件默认将显示所有进程打开的所有文件。</p>
<p>lsof输出各列信息的意义如下：</p>
<p>COMMAND：进程的名称 PID：进程标识符</p>
<p>USER：进程所有者</p>
<p>FD：文件描述符，应用程序通过文件描述符识别该文件。如cwd、txt等 TYPE：文件类型，如DIR、REG等</p>
<p>DEVICE：指定磁盘的名称</p>
<p>SIZE：文件的大小</p>
<p>NODE：索引节点（文件在磁盘上的标识）</p>
<p>NAME：打开文件的确切名称</p>
<p>FD 列中的文件描述符cwd 值表示应用程序的当前工作目录，这是该应用程序启动的目录，除非它本身对这个目录进行更改,txt 类型的文件是程序代码，如应用程序二进制文件本身或共享库，如上列表中显示的 &#x2F;sbin&#x2F;init 程序。</p>
<p>其次数值表示应用程序的文件描述符，这是打开该文件时返回的一个整数。如上的最后一行文件&#x2F;dev&#x2F;initctl，其文件描述符为 10。u 表示该文件被打开并处于读取&#x2F;写入模式，而不是只读 ® 或只写 (w) 模式。同时还有大写 的W 表示该应用程序具有对整个文件的写锁。该文件描述符用于确保每次只能打开一个应用程序实例。初始打开每个应用程序时，都具有三个文件描述符，从 0 到 2，分别表示标准输入、输出和错误流。所以大多数应用程序所打开的文件的 FD 都是从 3 开始。</p>
<p>与 FD 列相比，Type 列则比较直观。文件和目录分别称为 REG 和 DIR。而CHR 和 BLK，分别表示字符和块设备；或者 UNIX、FIFO 和 IPv4，分别表示 UNIX 域套接字、先进先出 (FIFO) 队列和网际协议 (IP) 套接字。</p>
<p>#常用参数<br>lsof语法格式是： lsof ［options］ filename</p>
<p>lsof abc.txt 显示开启文件abc.txt的进程 lsof -c abc 显示abc进程现在打开的文件 lsof -c -p 1234 列出进程号为1234的进程所打开的文件 lsof -g gid 显示归属gid的进程情况 lsof +d &#x2F;usr&#x2F;local&#x2F; 显示目录下被进程开启的文件 lsof +D &#x2F;usr&#x2F;local&#x2F; 同上，但是会搜索目录下的目录，时间较长 lsof -d 4 显示使用fd为4的进程 lsof -i 用以显示符合条件的进程情况 lsof -i[46] [protocol][@hostname|hostaddr][:service|port]   46 –&gt; IPv4 or IPv6   protocol –&gt; TCP or UDP   hostname –&gt; Internet host name   hostaddr –&gt; IPv4地址   service –&gt; &#x2F;etc&#x2F;service中的 service name (可以不止一个)   port –&gt; 端口号 (可以不止一个)</p>
<p>#lsof使用实例<br>##查找谁在使用文件系统</p>
<p>在卸载文件系统时，如果该文件系统中有任何打开的文件，操作通常将会失败。那么通过lsof可以找出那些进程在使用当前要卸载的文件系统，如下： # lsof &#x2F;GTES11&#x2F; COMMAND PID USER FD TYPE DEVICE SIZE NODE NAME bash 4208 root cwd DIR 3,1 4096 2 &#x2F;GTES11&#x2F; vim 4230 root cwd DIR 3,1 4096 2 &#x2F;GTES11&#x2F; 在这个示例中，用户root正在其&#x2F;GTES11目录中进行一些操作。一个 bash是实例正在运行，并且它当前的目录为&#x2F;GTES11，另一个则显示的是vim正在编辑&#x2F;GTES11下的文件。要成功地卸载&#x2F;GTES11，应该在通知用户以确保情况正常之后，中止这些进程。 这个示例说明了应用程序的当前工作目录非常重要，因为它仍保持着文件资源，并且可以防止文件系统被卸载。这就是为什么大部分守护进程（后台进程）将它们的目录更改为根目录、或服务特定的目录（如 sendmail 示例中的 &#x2F;var&#x2F;spool&#x2F;mqueue）的原因，以避免该守护进程阻止卸载不相关的文件系统。</p>
<p>##恢复删除的文件</p>
<p>当Linux计算机受到入侵时，常见的情况是日志文件被删除，以掩盖攻击者的踪迹。管理错误也可能导致意外删除重要的文件，比如在清理旧日志时，意外地删除了数据库的活动事务日志。有时可以通过lsof来恢复这些文件。 当进程打开了某个文件时，只要该进程保持打开该文件，即使将其删除，它依然存在于磁盘中。这意味着，进程并不知道文件已经被删除，它仍然可以向打开该文件时提供给它的文件描述符进行读取和写入。除了该进程之外，这个文件是不可见的，因为已经删除了其相应的目录索引节点。 在&#x2F;proc 目录下，其中包含了反映内核和进程树的各种文件。&#x2F;proc目录挂载的是在内存中所映射的一块区域，所以这些文件和目录并不存在于磁盘中，因此当我们对这些文件进行读取和写入时，实际上是在从内存中获取相关信息。大多数与 lsof 相关的信息都存储于以进程的 PID 命名的目录中，即 &#x2F;proc&#x2F;1234 中包含的是 PID 为 1234 的进程的信息。每个进程目录中存在着各种文件，它们可以使得应用程序简单地了解进程的内存空间、文件描述符列表、指向磁盘上的文件的符号链接和其他系统信息。lsof 程序使用该信息和其他关于内核内部状态的信息来产生其输出。所以lsof 可以显示进程的文件描述符和相关的文件名等信息。也就是我们通过访问进程的文件描述符可以找到该文件的相关信息。 当系统中的某个文件被意外地删除了，只要这个时候系统中还有进程正在访问该文件，那么我们就可以通过lsof从&#x2F;proc目录下恢复该文件的内容。 假如由于误操作将&#x2F;var&#x2F;log&#x2F;messages文件删除掉了，那么这时要将&#x2F;var&#x2F;log&#x2F;messages文件恢复的方法如下： 首先使用lsof来查看当前是否有进程打开&#x2F;var&#x2F;logmessages文件，如下： # lsof |grep &#x2F;var&#x2F;log&#x2F;messages syslogd 1283 root 2w REG 3,3 5381017 1773647 &#x2F;var&#x2F;log&#x2F;messages (deleted) 从上面的信息可以看到 PID 1283（syslogd）打开文件的文件描述符为 2。同时还可以看到&#x2F;var&#x2F;log&#x2F;messages已经标记被删除了。因此我们可以在 &#x2F;proc&#x2F;1283&#x2F;fd&#x2F;2 （fd下的每个以数字命名的文件表示进程对应的文件描述符）中查看相应的信息，如下： # head -n 10 &#x2F;proc&#x2F;1283&#x2F;fd&#x2F;2 Aug 4 13:50:15 holmes86 syslogd 1.4.1: restart. Aug 4 13:50:15 holmes86 kernel: klogd 1.4.1, log source &#x3D; &#x2F;proc&#x2F;kmsg started. Aug 4 13:50:15 holmes86 kernel: Linux version 2.6.22.1-8 (<a href="mailto:&#114;&#x6f;&#x6f;&#x74;&#x40;&#x65;&#x76;&#x65;&#x72;&#101;&#x73;&#x74;&#98;&#117;&#105;&#x6c;&#100;&#x65;&#114;&#46;&#x6c;&#x69;&#110;&#117;&#120;&#x2d;&#x72;&#101;&#110;&#x2e;&#111;&#114;&#x67;">&#114;&#x6f;&#x6f;&#x74;&#x40;&#x65;&#x76;&#x65;&#x72;&#101;&#x73;&#x74;&#98;&#117;&#105;&#x6c;&#100;&#x65;&#114;&#46;&#x6c;&#x69;&#110;&#117;&#120;&#x2d;&#x72;&#101;&#110;&#x2e;&#111;&#114;&#x67;</a>) (gcc version 4.2.0) #1 SMP Wed Jul 18 11:18:32 EDT 2007 Aug 4 13:50:15 holmes86 kernel: BIOS-provided physical RAM map: Aug 4 13:50:15 holmes86 kernel: BIOS-e820: 0000000000000000 - 000000000009f000 (usable) Aug 4 13:50:15 holmes86 kernel: BIOS-e820: 000000000009f000 - 00000000000a0000 (reserved) Aug 4 13:50:15 holmes86 kernel: BIOS-e820: 0000000000100000 - 000000001f7d3800 (usable) Aug 4 13:50:15 holmes86 kernel: BIOS-e820: 000000001f7d3800 - 0000000020000000 (reserved) Aug 4 13:50:15 holmes86 kernel: BIOS-e820: 00000000e0000000 - 00000000f0007000 (reserved) Aug 4 13:50:15 holmes86 kernel: BIOS-e820: 00000000f0008000 - 00000000f000c000 (reserved) 从上面的信息可以看出，查看 &#x2F;proc&#x2F;8663&#x2F;fd&#x2F;15 就可以得到所要恢复的数据。如果可以通过文件描述符查看相应的数据，那么就可以使用 I&#x2F;O 重定向将其复制到文件中，如: cat &#x2F;proc&#x2F;1283&#x2F;fd&#x2F;2 &gt; &#x2F;var&#x2F;log&#x2F;messages 对于许多应用程序，尤其是日志文件和数据库，这种恢复删除文件的方法非常有用。</p>
<p>可以列出被进程所打开的文件的信息。被打开的文件可以是</p>
<p>1.普通的文件，2.目录  3.网络文件系统的文件，4.字符设备文件  5.(函数)共享库  6.管道，命名管道 7.符号链接</p>
<p>8.底层的socket字流，网络socket，unix域名socket</p>
<p>9.在linux里面，大部分的东西都是被当做文件的…..还有其他很多</p>
<p>#怎样使用lsof</p>
<p>这里主要用案例的形式来介绍lsof 命令的使用</p>
<p>1.列出所有打开的文件:</p>
<p>lsof</p>
<p>备注: 如果不加任何参数，就会打开所有被打开的文件，建议加上一下参数来具体定位</p>
<ol start="2">
<li>查看谁正在使用某个文件</li>
</ol>
<p>lsof   &#x2F;filepath&#x2F;file</p>
<p>3.递归查看某个目录的文件信息</p>
<p>lsof +D &#x2F;filepath&#x2F;filepath2&#x2F;</p>
<p>备注: 使用了+D，对应目录下的所有子目录和文件都会被列出</p>
<ol start="4">
<li>比使用+D选项，遍历查看某个目录的所有文件信息 的方法</li>
</ol>
<p>lsof | grep ‘&#x2F;filepath&#x2F;filepath2&#x2F;’</p>
<ol start="5">
<li>列出某个用户打开的文件信息</li>
</ol>
<p>lsof  -u username</p>
<p>备注: -u 选项，u其实是user的缩写</p>
<ol start="6">
<li>列出某个程序所打开的文件信息</li>
</ol>
<p>lsof -c mysql</p>
<p>备注: -c 选项将会列出所有以mysql开头的程序的文件，其实你也可以写成lsof | grep mysql,但是第一种方法明显比第二种方法要少打几个字符了</p>
<ol start="7">
<li>列出多个程序多打开的文件信息</li>
</ol>
<p>lsof -c mysql -c apache</p>
<ol start="8">
<li>列出某个用户以及某个程序所打开的文件信息</li>
</ol>
<p>lsof -u test -c mysql</p>
<ol start="9">
<li>列出除了某个用户外的被打开的文件信息</li>
</ol>
<p>lsof   -u ^root</p>
<p>备注：^这个符号在用户名之前，将会把是root用户打开的进程不让显示</p>
<ol start="10">
<li>通过某个进程号显示该进行打开的文件</li>
</ol>
<p>lsof -p 1</p>
<ol start="11">
<li>列出多个进程号对应的文件信息</li>
</ol>
<p>lsof -p 123,456,789</p>
<ol start="12">
<li>列出除了某个进程号，其他进程号所打开的文件信息</li>
</ol>
<p>lsof -p ^1</p>
<p>13 . 列出所有的网络连接</p>
<p>lsof -i</p>
<ol start="14">
<li>列出所有tcp 网络连接信息</li>
</ol>
<p>lsof  -i tcp</p>
<ol start="15">
<li>列出所有udp网络连接信息</li>
</ol>
<p>lsof  -i udp</p>
<ol start="16">
<li>列出谁在使用某个端口</li>
</ol>
<p>lsof -i :3306</p>
<ol start="17">
<li>列出谁在使用某个特定的udp端口</li>
</ol>
<p>lsof -i udp:55</p>
<p>特定的tcp端口</p>
<p>lsof -i tcp:80</p>
<ol start="18">
<li>列出某个用户的所有活跃的网络端口</li>
</ol>
<p>lsof  -a -u test -i</p>
<ol start="19">
<li>列出所有网络文件系统</li>
</ol>
<p>lsof -N</p>
<p>20.域名socket文件</p>
<p>lsof -u</p>
<p>21.某个用户组所打开的文件信息</p>
<p>lsof -g 5555</p>
<ol start="22">
<li>根据文件描述列出对应的文件信息</li>
</ol>
<p>lsof -d description(like 2)</p>
<ol start="23">
<li>根据文件描述范围列出文件信息</li>
</ol>
<p>lsof -d 2-3</p>
<p>#实用命令</p>
<p>lsof <code>which httpd</code> &#x2F;&#x2F;那个进程在使用apache的可执行文件 lsof &#x2F;etc&#x2F;passwd &#x2F;&#x2F;那个进程在占用&#x2F;etc&#x2F;passwd lsof &#x2F;dev&#x2F;hda6 &#x2F;&#x2F;那个进程在占用hda6 lsof &#x2F;dev&#x2F;cdrom &#x2F;&#x2F;那个进程在占用光驱 lsof -c sendmail &#x2F;&#x2F;查看sendmail进程的文件使用情况 lsof -c courier -u ^zahn &#x2F;&#x2F;显示出那些文件被以courier打头的进程打开，但是并不属于用户zahn lsof -p 30297 &#x2F;&#x2F;显示那些文件被pid为30297的进程打开 lsof -D &#x2F;tmp 显示所有在&#x2F;tmp文件夹中打开的instance和文件的进程。但是symbol文件并不在列<br>lsof -u1000 &#x2F;&#x2F;查看uid是100的用户的进程的文件使用情况 lsof -utony &#x2F;&#x2F;查看用户tony的进程的文件使用情况 lsof -u^tony &#x2F;&#x2F;查看不是用户tony的进程的文件使用情况(^是取反的意思) lsof -i &#x2F;&#x2F;显示所有打开的端口 lsof -i:80 &#x2F;&#x2F;显示所有打开80端口的进程 lsof -i -U &#x2F;&#x2F;显示所有打开的端口和UNIX domain文件 lsof -i UDP@[url]<a target="_blank" rel="noopener" href="http://www.akadia.com:123/">www.akadia.com:123</a> &#x2F;&#x2F;显示那些进程打开了到<a target="_blank" rel="noopener" href="http://www.akadia.com的udp的123(ntp)端口的链接/">www.akadia.com的UDP的123(ntp)端口的链接</a> lsof -i <a href="mailto:&#116;&#x63;&#112;&#x40;&#111;&#x68;&#x61;&#104;&#97;&#x2e;&#x6b;&#x73;&#46;&#101;&#x64;&#117;&#46;&#x74;&#119;">&#116;&#x63;&#112;&#x40;&#111;&#x68;&#x61;&#104;&#97;&#x2e;&#x6b;&#x73;&#46;&#101;&#x64;&#117;&#46;&#x74;&#119;</a>:ftp -r &#x2F;&#x2F;不断查看目前ftp连接的情况(-r，lsof会永远不断的执行，直到收到中断信号,+r，lsof会一直执行，直到没有档案被显示,缺省是15s刷新) lsof -i <a href="mailto:&#x74;&#99;&#112;&#x40;&#x6f;&#104;&#97;&#104;&#97;&#46;&#x6b;&#x73;&#46;&#101;&#x64;&#117;&#x2e;&#x74;&#119;">&#x74;&#99;&#112;&#x40;&#x6f;&#104;&#97;&#104;&#97;&#46;&#x6b;&#x73;&#46;&#101;&#x64;&#117;&#x2e;&#x74;&#119;</a>:ftp -n &#x2F;&#x2F;lsof -n 不将IP转换为hostname，缺省是不加上-n参数</p>
<p>来自：[CNBLOGS](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/sparkbj/p/7161669.html">https://www.cnblogs.com/sparkbj/p/7161669.html</a> &quot;CNBLOGS&quot;)</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-19T07:44:51.000Z" title="2021/1/19 下午3:44:51">2021-01-19</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">3 分钟读完 (大约428个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/19/order%20by%20%E8%AF%AD%E5%8F%A5%E5%AF%B9null%E5%AD%97%E6%AE%B5%E7%9A%84%E9%BB%98%E8%AE%A4%E6%8E%92%E5%BA%8F/">order by 语句对null字段的默认排序</a></h1><div class="content"><p>1.oracle 结论 (null 最大)</p>
<ul>
<li>order by colum asc 时，null默认被放在最后</li>
<li>order by colum desc 时，null默认被放在最前</li>
<li>nulls first 时，强制null放在最前，不为null的按声明顺序[asc|desc]进行排序</li>
<li>nulls last 时，强制null放在最后，不为null的按声明顺序[asc|desc]进行排序</li>
</ul>
<p>2.mysql,sql server 结论 (null 最小)<br>order by colum asc 时，null默认被放在最前<br>order by colum desc 时，null默认被放在最后<br>ORDER BY IF(ISNULL(update_date),0,1) null被强制放在最前，不为null的按声明顺序[asc|desc]进行排序<br>ORDER BY IF(ISNULL(update_date),1,0) null被强制放在最后，不为null的按声明顺序[asc|desc]进行排序</p>
<pre><code>SELECT * FROM t1 where 1=1 ORDER BY IF(ISNULL(order_index),1,0),order_index asc,create_time desc
</code></pre>
<p>mysql nulls first nulls last解决方案<br>nulls first:</p>
<p>order by IF(ISNULL(my_field),0,1),my_field;<br>nulls last:</p>
<p>order by IF(ISNULL(my_field),1,0),my_field;<br>ISNULL函数当my_field字段为空是，返回1，当不为空时返回0</p>
<p>IF函数，如果第一个表达式为真，则返回第二个参数的值，否则，返回第三个参数的值。</p>
<p>EXTRACT(unit FROM date) </p>
<p>pgsql null排在有值的行前面还是后面通过语法来指定 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--null值在前</span><br><span class="line">select * from tablename order by id nulls first;</span><br><span class="line">--null值在后</span><br><span class="line">select * from tablename order by id nulls last;</span><br><span class="line">--null在前配合desc使用</span><br><span class="line">select * from tablename order by id desc nulls first;</span><br><span class="line">--null在后配合desc使用</span><br><span class="line">select * from tablename order by id desc nulls last;</span><br><span class="line">举例:</span><br><span class="line">null值在后,先按照count1降序排列,count1相同再按照count2降序排列</span><br><span class="line">order by count1 desc nulls last, count2  desc nulls last;</span><br></pre></td></tr></table></figure>

<p>mysql的null值排序和pgsql相反<br><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_extract.asp">https://www.w3school.com.cn/sql/func_extract.asp</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-16T09:40:07.000Z" title="2021/1/16 下午5:40:07">2021-01-16</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">3 分钟读完 (大约457个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/16/%E6%94%B6%E9%9B%86%E7%9A%84%E4%B8%80%E4%BA%9B%E8%8B%B1%E6%96%87%E5%8F%A5%E5%AD%90%E5%92%8C%E7%9F%AD%E8%AF%AD/">收集的一些英文句子和短语</a></h1><div class="content"><h1 id="句子"><a href="#句子" class="headerlink" title="句子"></a>句子</h1><blockquote>
<p>I am not afraid of tomorrow for I have seen yesterday and I love today.</p>
</blockquote>
<p>我不害怕明天，因为我经历过昨天，又热爱今天。</p>
<blockquote>
<p>The value of life lies not length of days,but in the use of the make of them.</p>
</blockquote>
<p>生命的价值不在于能活多少天，而在于我们如何利用这些日子。</p>
<blockquote>
<p>Courage is the ladder on which all the other virtues mount.</p>
</blockquote>
<p>勇气是其他美德攀登的梯子。</p>
<blockquote>
<p>Better to light one candle than to curse the darkness.</p>
</blockquote>
<p>与其诅咒黑暗，不如燃起蜡烛。</p>
<blockquote>
<p>You don’t love a girl because she is beautiful, but she is beautiful because you love her.</p>
</blockquote>
<p>你不是因为她美丽而爱他，而他却因为你的爱而美丽。</p>
<blockquote>
<p>Love alone could waken love!</p>
</blockquote>
<p>只有爱才能唤醒爱。</p>
<blockquote>
<p>Maybe God wants us to meet a few wrong people before meeting the right one ,so that when we finally meet the person,we will know how to be grateful.</p>
</blockquote>
<p>在遇到梦中之人之前，上天也许会安排我们先遇到别的人；在我们终于遇见心仪的人时，便应当心存感激。</p>
<blockquote>
<p>Enjoy when you can, and endure when you must.</p>
</blockquote>
<p>能享受时可进行，须忍耐时当坚持。</p>
<blockquote>
<p>Friendship is a sheltering tree.</p>
</blockquote>
<p>友情犹如大树，为你遮风挡雨。</p>
<blockquote>
<p>We have to dare to be ourselves ,however frightening or strange that self may prove to be.</p>
</blockquote>
<p>我们必须勇于做自己，不管这个自己有多可怕，有多诡异。</p>
<blockquote>
<p>A friend is one of the nicest things you can have,an one of the best things you can be .</p>
</blockquote>
<p>拥有朋友时最美好的一件事，成为别人的朋友是最美妙的一件事。</p>
<h1 id="短语"><a href="#短语" class="headerlink" title="短语"></a>短语</h1><ul>
<li>attached to</li>
<li>approved </li>
<li>reminder shortly</li>
<li>renewal</li>
</ul>
<h1 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h1><p>maven 行家，专家</p>
<p>continuous 持续的</p>
<p>integration 集成</p>
<p>delivery 交付</p>
<h1 id="英语俚语"><a href="#英语俚语" class="headerlink" title="英语俚语"></a>英语俚语</h1><p>dog persion 喜欢狗的人<br>cat persion 习惯猫的人<br>people persion 喜欢和人打交道的人</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-09T11:36:56.000Z" title="2021/1/9 下午7:36:56">2021-01-09</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">7 分钟读完 (大约1003个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/09/npm%20&amp;%20yarn%20%E6%9B%B4%E6%8D%A2%E6%BA%90%E7%AD%89%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%88%96%E6%93%8D%E4%BD%9C/">npm &amp; yarn 更换源等常用命令或操作</a></h1><div class="content"><h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><blockquote>
<p>由于node下载第三方依赖包是从国外服务器下载，虽然没有被墙，但是下载的速度是非常的缓慢且有可能会出现异常。<br>所以为了提高效率，我们还是把npm的镜像源替换成淘宝的镜像源。有几种方式供我们选择</p>
</blockquote>
<h2 id="使用cnpm"><a href="#使用cnpm" class="headerlink" title="使用cnpm"></a>使用cnpm</h2><p>使用阿里定制的cnpm命令行工具代替默认的npm，输入以下代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org </span><br><span class="line">cnpm -v      #检测是否安装成功</span><br></pre></td></tr></table></figure>

<p>安装成功之后，以后安装依赖包的方式和npm的是一样的，只是npm的命令换成是cnpm就可以了</p>
<p>假如你已经习惯了使用npm的安装方式的，不想去下载阿里的cnpm命令工具的话，很简单，我们直接将node的仓库地址换成淘宝仓库地址即可</p>
<h2 id="单次使用"><a href="#单次使用" class="headerlink" title="单次使用"></a>单次使用</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h2 id="永久使用"><a href="#永久使用" class="headerlink" title="永久使用"></a>永久使用</h2><p>在开发react-native的时候，不要使用cnpm！cnpm安装的模块路径比较奇怪，packager不能正常识别。所以，为了方便开发，我们最好是直接永久使用淘宝的镜像源</p>
<p>直接命令行的设置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>手动修改设置</p>
<p>1.打开<code>.npmrc</code>文件（<code>C:\Program Files\nodejs\node_modules\npm\npmrc</code>，没有的话可以使用git命令行建一个(<code>touch .npmrc</code>)，用<code>cmd</code>命令建会报错）<br>2.增加 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registry =https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>即可。</p>
<p>检测是否修改成功</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置后可通过下面方式来验证是否成功</span></span><br><span class="line">npm config <span class="keyword">list</span></span><br><span class="line">npm config get registry</span><br><span class="line">npm info express</span><br></pre></td></tr></table></figure>

<p>注：如果想还原npm仓库地址的话，只需要在把地址配置成npm镜像就可以了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npmjs.org/</span><br></pre></td></tr></table></figure>
<h1 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h1><h2 id="yarn-add"><a href="#yarn-add" class="headerlink" title="yarn add"></a>yarn add</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add [package]@[version]</span><br></pre></td></tr></table></figure>

<p> 这将安装您的<code>dependencies</code>中的一个或多个包。<br> 用 <code>--dev</code> 或 <code>-D</code> 会在 <code>devDependencies</code> 里安装一个或多个包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn global add &lt;package...&gt; //全局安装依赖</span><br></pre></td></tr></table></figure>

<p> 对于绝大部分包来说，这是个坏习惯，因为它们是隐藏的。 最好本地安装你的依赖，这样它们都是明确的，每用你项目的人都能得到同样的依赖。<br> 注意：<code>yarn add global &lt;package...&gt;</code>会变成本地安装，注意顺序。</p>
<h2 id="yarn-cache"><a href="#yarn-cache" class="headerlink" title="yarn cache"></a>yarn cache</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn cache dir</span><br></pre></td></tr></table></figure>

<p> 运行 <code>yarn cache dir</code> 会打印出当前的 <code>yarn</code>全局缓存在哪里。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn cache list --pattern &lt;pattern&gt; //列出匹配指定模式的已缓存的包</span><br></pre></td></tr></table></figure>

<p> 示例：yarn cache list –pattern “gulp-(match|newer)”</p>
<p>yarn cache clean<br> 运行此命令将清除全局缓存。 将在下次运行 yarn 或 yarn install 时重新填充。</p>
<h2 id="yarn-list"><a href="#yarn-list" class="headerlink" title="yarn list"></a>yarn list</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn list [--depth] [--pattern]</span><br></pre></td></tr></table></figure>

<p> 默认情况下，所有包和它们的依赖会被显示。 要限制依赖的深度，你可以给 list 命令添加一个标志 –depth 所需的深度。<br> 示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn list --depth=0</span><br></pre></td></tr></table></figure>

<h2 id="yarn-remove"><a href="#yarn-remove" class="headerlink" title="yarn remove"></a>yarn remove</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn remove &lt;package...&gt;</span><br></pre></td></tr></table></figure>

<p> 运行 <code>yarn remove foo</code> 会从你的直接依赖里移除名为 <code>foo</code> 的包，在此期间会更新你的 <code>package.json</code> 和 <code>yarn.lock</code> 文件。</p>
<h2 id="yarn-run"><a href="#yarn-run" class="headerlink" title="yarn run"></a>yarn run</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn run [script] [&lt;args&gt;]</span><br></pre></td></tr></table></figure>

<p> 如果你已经在你的包里定义了 <code>scripts</code>，这个命令会运行指定的 <code>[script]</code>。例如：<br> 运行这个命令会执行你的 <code>package.json</code> 里名为 <code>&quot;test&quot;</code> 的脚本。</p>
<h2 id="yarn-upgrade"><a href="#yarn-upgrade" class="headerlink" title="yarn upgrade"></a>yarn upgrade</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn upgrade [package | package@tag | package@version | @scope/]... [--ignore-engines] [--pattern]</span><br></pre></td></tr></table></figure>

<p> 可以选择指定一个或多个包名称。指定包名称时，将只升级这些包。未指定包名称时，将升级所有依赖项。</p>
<p>查看npm上已经全局安装的命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm list -g --depth=0</span><br></pre></td></tr></table></figure>

<p>查看yarn 全局安装的根目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn global bin</span><br></pre></td></tr></table></figure>


<p> 查看npm 全局安装的根目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm bin</span><br></pre></td></tr></table></figure>

<p>yarn windows 安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install yarn</span><br></pre></td></tr></table></figure>

<p> 或者 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install yarn</span><br></pre></td></tr></table></figure>

<p> 或者下载安装包</p>
<h2 id="yarn指定淘宝源"><a href="#yarn指定淘宝源" class="headerlink" title="yarn指定淘宝源"></a>yarn指定淘宝源</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config set registry http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>


<p>原文链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f5d85e541a99">https://www.jianshu.com/p/f5d85e541a99</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-04T13:20:12.000Z" title="2021/1/4 下午9:20:12">2021-01-04</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">3 分钟读完 (大约511个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/04/Apache2%20CGI%20%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE/">Apache2 CGI 简单配置</a></h1><div class="content"><p>&gt; 参考：<a target="_blank" rel="noopener" href="http://httpd.apache.org/docs/2.4/howto/cgi.html">http://httpd.apache.org/docs/2.4/howto/cgi.html</a></p>
<h3 id="一，-CGI简介"><a href="#一，-CGI简介" class="headerlink" title="一， CGI简介"></a>一， CGI简介</h3><p>公共网关接口（Common Gateway Interface，CGI）是Web 服务器运行时外部程序的规范，按CGI 编写的程序可以扩展服务器功能。CGI 应用程序能与浏览器进行交互，还可通过数据API与数据库服务器等外部数据源进行通信，从数据库服务器中获取数据。格式化为HTML文档后，发送给浏览器，也可以将从浏览器获得的数据放到数据库中。几乎所有服务器都支持CGI，可用任何语言编写CGI，包括流行的Python、C、C ++、Java、VB 和Delphi 等。</p>
<h3 id="二，CGI-配置"><a href="#二，CGI-配置" class="headerlink" title="二，CGI 配置"></a>二，CGI 配置</h3><p>Apache2 中CGI的配置文件位于 &#x2F;etc&#x2F;apache2&#x2F;mods-available&#x2F; 中（mods-enabled “ 为常用的（也就是默认开启的）， ” mods-available “为不常用的（也就是默认不开启)）。我们只需要将mods-available文件夹中的  &quot; cgid.conf &quot;, &quot; cgid.load &quot;, &quot; cgi.load &quot;  软连接到mods-enabled 文件夹就可以了</p>
<pre><code>sudo ln -s /etc/apache2/mods-available/cgid.conf /etc/apache2/mods-enabled/cgid.conf
sudo  ln -s /etc/apache2/mods-available/cgid.load /etc/apache2/mods-enabled/cgid.load
sudo  ln -s /etc/apache2/mods-available/cgi.load /etc/apache2/mods-enabled/cgi.load
</code></pre>
<p>修改cgi.load的内容如下（vim &#x2F;etc&#x2F;apache2&#x2F;mods-available&#x2F;cgid.load ）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LoadModule cgi_module /usr/lib/apache2/modules/mod_cgi.so     //默认有则不需要加</span><br><span class="line">AddHandler cgi-script .cgi .pl .py .sh       // 我们加入这一句，使CGI支持 perl和python 和shell脚本</span><br></pre></td></tr></table></figure>

<h3 id="三，修改默认的cgi-bin的路径"><a href="#三，修改默认的cgi-bin的路径" class="headerlink" title="三，修改默认的cgi-bin的路径"></a>三，修改默认的cgi-bin的路径</h3><p>&gt; vim &#x2F;etc&#x2F;apache2&#x2F;conf-available&#x2F;serve-cgi-bin.conf</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;IfModule mod_alias.c&amp;gt;</span><br><span class="line">    &amp;lt;IfModule mod_cgi.c&amp;gt;</span><br><span class="line">        Define ENABLE_USR_LIB_CGI_BIN</span><br><span class="line">    &amp;lt;/IfModule&amp;gt;</span><br><span class="line">    &amp;lt;IfModule mod_cgid.c&amp;gt;</span><br><span class="line">        Define ENABLE_USR_LIB_CGI_BIN</span><br><span class="line">    &amp;lt;/IfModule&amp;gt;</span><br><span class="line">    &amp;lt;IfDefine ENABLE_USR_LIB_CGI_BIN&amp;gt;</span><br><span class="line">        ScriptAlias /cgi-bin/ /<span class="keyword">var</span>/www/cgi-bin/</span><br><span class="line">            &amp;lt;<span class="built_in">Directory</span> &amp;quot;/<span class="keyword">var</span>/www/cgi-bin&amp;quot;&amp;gt;</span><br><span class="line">                AllowOverride None</span><br><span class="line">                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch Require all granted</span><br><span class="line">            &amp;lt;/<span class="built_in">Directory</span>&amp;gt;</span><br><span class="line">    &amp;lt;/IfDefine&amp;gt;</span><br><span class="line">&amp;lt;/IfModule&amp;gt;</span><br></pre></td></tr></table></figure>
<h3 id="四，重启Apache2-服务"><a href="#四，重启Apache2-服务" class="headerlink" title="四，重启Apache2 服务"></a>四，重启Apache2 服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service apache2 restart</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-12-15T06:32:31.000Z" title="2020/12/15 下午2:32:31">2020-12-15</time>发表</span><span class="level-item"><time dateTime="2022-08-28T02:23:10.663Z" title="2022/8/28 上午10:23:10">2022-08-28</time>更新</span><span class="level-item">16 分钟读完 (大约2447个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/15/php%E4%B8%ADob%E5%87%BD%E6%95%B0%E7%9A%84%E7%94%A8%E6%B3%95/">php中ob函数的用法</a></h1><div class="content"><p>与输出缓冲区有关的配置<br>　　在PHP.INI中,有两个跟缓冲区紧密相关的配置项<br>　　1.output_buffering<br>　　　　该配置直接影响的是php本身的缓冲区,有3种配置参数.on&#x2F;off&#x2F;xK(x为某个整型数值);<br>　　　　on - 开启缓冲区<br>　　　　off - 关闭缓冲区<br>　　　　256k - 开启缓冲区,而且当缓冲区的内容超过256k的时候,自动刷新缓冲区(把数据发送到apache);</p>
<p>　　2.implicit_flush<br>　　　　该配置直接影响apache的缓冲区,有2种配置参数. on&#x2F;off<br>　　　　on - 自动刷新apache缓冲区,也就是,当php发送数据到apache的缓冲区的时候,不需要等待其他指令,直接就把输出返回到浏览器<br>　　　　off - 不自动刷新apache缓冲区,接受到数据后,等待刷新指令</p>
<p>而默认直接是开启缓冲区的，所以我们可以直接不用ob_start()，所以我先把缓冲区关闭</p>
<p>下面几个函数的用法</p>
<ul>
<li>ob_start() - 打开缓冲区</li>
<li>ob_get_contents() - 返回输出缓冲区的内容</li>
<li>ob_flush() - 冲刷出（送出）输出缓冲区中的内容</li>
<li>ob_clean() - 清空（擦掉）输出缓冲区</li>
<li>ob_end_flush() - 冲刷出（送出）输出缓冲区内容并关闭缓冲</li>
<li>ob_end_clean() - 清空（擦除）缓冲区并关闭输出缓冲</li>
<li>flush() - 刷新输出缓冲</li>
</ul>
<p>　</p>
<p>&gt; ob_start()在服务器打开一个缓冲区来保存所有的输出。所以在任何时候使用echo ，输出都将被加入缓冲区中，直到程序运行结束或者使用ob_flush()来结束。然后在服务器中缓冲区的内容才会发送到浏览器，由浏览器来解析显示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello &amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();123456789</span><br></pre></td></tr></table></figure>

<p>&gt; 输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World1</span><br></pre></td></tr></table></figure>

<p>如果只是想要存储缓存区而不是输出的话加上ob_end_clean();</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello &amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">ob_end_clean();1234567891011</span><br></pre></td></tr></table></figure>

<p>可以看到浏览器上没有任何输出，这时我们加上var_dump来看看out1、out2两个变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello &amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ob_end_clean();</span><br><span class="line">var_dump($out1, $out2);1234567891011121314</span><br></pre></td></tr></table></figure>

<p>&gt; 输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string(6) &amp;quot;Hello &amp;quot; string(11) &amp;quot;Hello World&amp;quot;1</span><br></pre></td></tr></table></figure>

<p>&gt; 接下来讲ob_clean()跟ob_end_clean()的区别</p>
<p>&gt; 使用 ob_end_clean()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello &amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World1&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">ob_end_clean();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World2&amp;lt;br&amp;gt;&amp;quot;;</span><br><span class="line">echo &amp;quot;World3&amp;lt;br&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out3 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">var_dump($out3);123456789101112131415161718</span><br></pre></td></tr></table></figure>

<p>&gt; 输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">World2</span><br><span class="line">World3</span><br><span class="line">bool(false)123</span><br></pre></td></tr></table></figure>

<p>&gt; 使用 ob_clean()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello &amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World1&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">ob_clean();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World2&amp;lt;br&amp;gt;&amp;quot;;</span><br><span class="line">echo &amp;quot;World3&amp;lt;br&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out3 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">var_dump($out3);123456789101112131415161718</span><br></pre></td></tr></table></figure>

<p>&gt; 输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">World2</span><br><span class="line">World3</span><br><span class="line">string(20) &amp;quot;World2</span><br><span class="line">World3</span><br><span class="line">&amp;quot;12345</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&gt; 这里我们对out3使用转义函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var_dump(htmlentities($out3));1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&gt; 输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">World</span><br><span class="line">World</span><br><span class="line">string(32) &amp;quot;World&amp;lt;br/&amp;gt;World&amp;lt;br/&amp;gt;&amp;quot;123</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&gt; 解释</p>
<p>ob_end_clean() 跟ob_clean() 都是清空了缓冲区，不让echo输出到浏览器,这是共同点，而不同点是ob_end_clean()还关闭了缓冲区</p>
<p>&gt; 接下来讲ob_end_flush()跟ob_flush()跟flush()的区别</p>
<p>&gt; 使用ob_end_flush()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World1&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ob_end_flush();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World2&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line">echo &amp;quot;World3&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out3 = ob_get_contents();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var_dump(htmlentities($out3));1234567891011121314151617181920</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&gt; 输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br><span class="line">World1</span><br><span class="line">World2</span><br><span class="line">World3</span><br><span class="line">string(0) &amp;quot;&amp;quot;12345</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>补充：这里为了显示容易观察，我全部都给了<code> </code></p>
<p>&gt; 使用ob_flush()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World1&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ob__flush();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World2&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line">echo &amp;quot;World3br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out3 = ob_get_contents();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var_dump(htmlentities($out3));1234567891011121314151617181920</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&gt; 输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br><span class="line">World1</span><br><span class="line">World2</span><br><span class="line">World3</span><br><span class="line">string(32) &amp;quot;World2&amp;lt;br/&amp;gt;World3&amp;lt;br/&amp;gt;&amp;quot;12345</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>&gt; 使用flush()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ob_start();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;Hello&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out1 = ob_get_contents();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World1&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out2 = ob_get_contents();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">flush();</span><br><span class="line"></span><br><span class="line">echo &amp;quot;World2&amp;lt;br/&amp;gt;&amp;quot;;</span><br><span class="line">echo &amp;quot;World3br/&amp;gt;&amp;quot;;</span><br><span class="line"></span><br><span class="line">$out3 = ob_get_contents();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var_dump(htmlentities($out3));1234567891011121314151617181920</span><br></pre></td></tr></table></figure>

<p>&gt; 输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br><span class="line">World1</span><br><span class="line">World2</span><br><span class="line">World3</span><br><span class="line">string(67) &amp;quot;Hello&amp;lt;br/&amp;gt;World1&amp;lt;br/&amp;gt;World2&amp;lt;br/&amp;gt;World3&amp;lt;br/&amp;gt;&amp;quot;12345</span><br></pre></td></tr></table></figure>

<p>&gt; 区别</p>
<p>可以看出ob_end_flush() 是输出了缓冲区的内容并且关闭了缓冲区,而ob_flush()只是刷出了缓冲区内容，相当于将缓冲区清空，而flush()输出了缓冲区内容也没有将缓冲区清空，所以下面的缓冲区内容还会继续追加。</p>
<p>&gt; 总结</p>
<p>只能在实践中继续成长，有什么不对的地方望大家指出。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33862778/article/details/80787510">https://blog.csdn.net/qq_33862778/article/details/80787510</a></p>
<p>header(&quot;Location:login.php&quot;)应该注意的几个问题<br>header(&quot;Location:login.php&quot;)应该注意的几个问题</p>
<p>header(&quot;Location:&quot;)作为php的转向语句。其实在使用中，他有几点需要注意的地方。</p>
<p>1、要求header前没有任何输出</p>
<p>但是很多时候在header前我们已经输出了好多东西了，此时如果再次header的话，显然是出错的，在这里我们启用了一个ob的概念，ob的意思是在服务器端先存储有关输出，等待适当的时机再输出，而不是像现在这样运行一句，输出一句,发现header语句就只能报错了。</p>
<p>具体的语句有： ob_start(); ob_end_clean();ob_flush();………</p>
<p>2、在header(&quot;Location:&quot;)后要及时exit</p>
<p>否则他是会继续执行的，虽然在浏览器端你看不到相应的数据出现，但是如果你进行抓包分析的话，你就会看到下面的语句也是在执行的。而且被输送到了浏览器客户端，只不过是没有被浏览器执行为html而已（浏览器执行了header进行了转向操作）。</p>
<p>所以,标准的使用方法是：</p>
<p>ob_start();</p>
<p>……..</p>
<p>if ( something ){</p>
<p>ob_end_clean();</p>
<p>header(&quot;Location: yourlocation&quot;)；</p>
<p>exit;</p>
<p>else{</p>
<p>……….</p>
<p>ob_flush(); &#x2F;&#x2F;可省略</p>
<p>要想在header前有输出的话，可以修改php.ini文件</p>
<p>output_handler &#x3D;mb_output_handler</p>
<p>或 output_handler &#x3D;on</p>
<p>Output Control 函数可以让你自由控制脚本中数据的输出。它非常地有用，特别是对于：当你想在数据已经输出后，再输出文件头的情况。输出控制函数不对使用 header() 或 setcookie(), 发送的文件头信息产生影响,只对那些类似于 echo() 和 PHP 代码的数据块有作用。<br>一、 相关函数简介：<br>1、Flush：刷新缓冲区的内容，输出。<br>函数格式：flush()<br>说明：这个函数经常使用，效率很高。<br>2、ob_start ：打开输出缓冲区<br>函数格式：void ob_start(void)<br>说明：当缓冲区激活时，所有来自PHP程序的非文件头信息均不会发送，而是保存在内部缓冲区。为了输出缓冲区的内容，可以使用ob_end_flush()或flush()输出缓冲区的内容。<br>3 、ob_get_contents ：返回内部缓冲区的内容。<br>使用方法：string ob_get_contents(void)<br>说明：这个函数会返回当前缓冲区中的内容，如果输出缓冲区没有激活，则返回 FALSE 。<br>4、ob_get_length：返回内部缓冲区的长度。<br>使用方法：int ob_get_length(void)<br>说明：这个函数会返回当前缓冲区中的长度；和ob_get_contents一样，如果输出缓冲区没有激活。则返回 FALSE。<br>5、ob_end_flush ：发送内部缓冲区的内容到浏览器，并且关闭输出缓冲区。<br>使用方法：void ob_end_flush(void)<br>说明：这个函数发送输出缓冲区的内容（如果有的话）。<br>6、ob_end_clean：删除内部缓冲区的内容，并且关闭内部缓冲区<br>使用方法：void ob_end_clean(void)<br>说明：这个函数不会输出内部缓冲区的内容而是把它删除！<br>7、ob_implicit_flush：打开或关闭绝对刷新<br>使用方法：void ob_implicit_flush ([int flag])<br>说明：使用过Perl的人都知道|&#x3D;x的意义，这个字符串可以打开&#x2F;关闭缓冲区，而obimplicitflush函数也和那个一样，默认为关闭缓冲区，打开绝对输出后，每个脚本输出都直接发送到浏览器，不再需要调用flush()obstart()开始输出缓冲,这时PHP停止输出,在这以后的输出都被转到一个内部的缓冲里.obgetcontents()这个函数返回内部缓冲的内容.这就等于把这些输出都变成了字符串.obgetlength()返回内部缓冲的长度.obendflush()结束输出缓冲,并输出缓冲里的内容.在这以后的输出都是正常输出.obendclean()结束输出缓冲,并扔掉缓冲里的内容.举个例子,vardump()函数输出一个变量的结构和内容,这在调试的时候很有用.但如果变量的内容里有&lt;,&gt;等HTML的特殊字符,输出到网页里就看不见了.怎么办呢?用输出缓冲函数能很容易的解决这个问题.obstart();vardump(var);<br>out&#x3D;obgetcontents();obendclean();这时vardump()的输出已经存在out 里了. 你可以现在就输出:<br>echo ‘&lt;pre&gt;’ . htmlspecialchars($out) . ‘&lt;&#x2F;pre&gt;’ ;<br>或者等到将来, 再或者把这个字符串送到模板(Template)里再输出.<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/suizhikuo/archive/2012/11/26/2789101.html">https://www.cnblogs.com/suizhikuo/archive/2012/11/26/2789101.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-12-15T03:00:16.000Z" title="2020/12/15 上午11:00:16">2020-12-15</time>发表</span><span class="level-item"><time dateTime="2022-09-10T15:55:33.019Z" title="2022/9/10 下午11:55:33">2022-09-10</time>更新</span><span class="level-item">14 分钟读完 (大约2148个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/15/git%20%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/">git 使用笔记</a></h1><div class="content"><h1 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h1><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git config -e # 编辑配置文件</span><br><span class="line">git config user.name &#x27;username&#x27;</span><br><span class="line">git config user.email &#x27;email&#x27;</span><br><span class="line">git clone [-b] branch xxx.git 拉取</span><br><span class="line">git status </span><br><span class="line">git log [-p]/[-n]  ---n代表数字</span><br><span class="line">git log --stat ---简单信息</span><br><span class="line">git log --name-status  ---可以显示新增、修改、删除的文件清单</span><br><span class="line">git commit [-m &#x27;&#x27;]</span><br><span class="line">git push 远程 本地</span><br><span class="line">git pull 远程 本地</span><br><span class="line">git pull origin 1.x:dev 将远程origin的1.x分支拉取到本地dev分支</span><br><span class="line">git push origin dev:1.x 将本地dev分支推送到远程1.x分支</span><br><span class="line">git fetch origin test:example fetch远程test到本地example(原本不存在)</span><br><span class="line">git tag test_tag c809ddbf83939a89659e51dc2a5fe183af384233　　　　//在某个commit 上打tag</span><br><span class="line">git tag [tag] 新建或者list tag</span><br><span class="line">git tag -d &lt;tag&gt; 删除本地tag</span><br><span class="line">git push origin :refs/tags/test_tag　　　　//本地tag删除了，再执行该句，删除线上tag</span><br><span class="line">git push origin :&lt;tag&gt;/&lt;branch&gt; 删除远程tag/分支</span><br><span class="line">git remote add origin https://git.com</span><br><span class="line">git remote set-url origin https://&lt;token&gt;@github.com/&lt;username&gt;/&lt;repo&gt;.git</span><br><span class="line">git remote set-url --add origin https://&lt;token&gt;@github.com/&lt;username&gt;/&lt;repo&gt;.git # 添加多个</span><br><span class="line">git remote get-url origin</span><br><span class="line">git remote -v # 列出所有</span><br><span class="line">git remote rename 原名 新名</span><br><span class="line">git remote remove 名字</span><br><span class="line">git add xx命令可以将xx文件添加到暂存区，如果有很多改动可以通过 git add -A .来一次添加所有改变的文件。注意 -A 选项后面还有一个句点。 git add -A表示添加所有内容， git add . 表示添加新文件和编辑过的文件不包括删除的文件; git add -u 表示添加编辑或者删除的文件，不包括新添加的文件</span><br><span class="line">git commit -m &quot;提交注释&quot;</span><br><span class="line">git branch 查看本地所有分支</span><br><span class="line">git branch -r查看远程所有分支  一般当前本地分支前带有“*”号且为绿色，远程分支为红色</span><br><span class="line">git branch -a</span><br><span class="line">git branch -vv</span><br><span class="line">git branch [-f] &lt;branchname&gt; 新建分支但是不切换</span><br><span class="line">git branch -d[-D] &lt;branchname&gt;删除本地分支[强制(相当于 --delete --force)]</span><br><span class="line">git branch -d -r &lt;branchname&gt;删除远程分支，其中&lt;branchname&gt;为本地分支名</span><br><span class="line">git branch (-m | -M) &lt;oldbranch&gt; &lt;newbranch&gt; //修改branch名称</span><br><span class="line">git checkout -b &lt;branchname&gt; 新建并切换至新分支</span><br><span class="line">git push origin  分支名称，一般使用：git push origin master</span><br><span class="line">git branch --set-upstream 本地关联远程分支</span><br><span class="line">git push --set-upstream origin master</span><br><span class="line">git remote rm</span><br><span class="line">git config --global core.autocrlf false 禁用Git默认配置替换回车换行成统一的CRLF</span><br><span class="line">git diff  分支1 分支2 --stat （加上 --stat 是显示文件列表, 否则是文件内容diff）</span><br><span class="line">git cherry-pick &lt;commitHash&gt; 将commitHash的提交应用于当前分支 </span><br><span class="line">git cherry-pick &lt;branch&gt; 会转移该分支的最新一次提交</span><br><span class="line">git cherry-pick &lt;hash1&gt; &lt;hash2&gt; 转移这两次提交</span><br><span class="line">git cherry-pick &lt;hash1&gt;..&lt;hash10&gt; 转移hash1到hash10的提交（hash1必须比hash10早，默认不包含1, 如果要包含，需要&lt;hash1^&gt;, 例如：git cherry-pick A^..B ）</span><br></pre></td></tr></table></figure>

<blockquote>
<p>更多cherry-pick用法可以参考：<a target="_blank" rel="noopener" href="https://ruanyifeng.com/blog/2020/04/git-cherry-pick.html">https://ruanyifeng.com/blog/2020/04/git-cherry-pick.html</a> 或者官方文档</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick --help</span><br></pre></td></tr></table></figure>

<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-d  --delete：删除</span><br><span class="line">-D  --delete --force的快捷键</span><br><span class="line">-f  --force：强制</span><br><span class="line">-m  --move：移动或重命名</span><br><span class="line">-M  --move --force的快捷键</span><br><span class="line">-r  --remote：远程</span><br><span class="line">-a  --all：所有</span><br></pre></td></tr></table></figure>

<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><p>最近使用git pull的时候多次碰见下面的情况：</p>
<p>There is no tracking information for the current branch.<br>Please specify which branch you want to merge with.<br>See git-pull(1) for details.</p>
<p>git pull <remote> <branch></p>
<p>If you wish to set tracking information for this branch you can do so with:</p>
<p>git branch –set-upstream-to&#x3D;origin&#x2F;<branch> release</p>
<p>其实，输出的提示信息说的还是比较明白的。<br>使用git在本地新建一个分支后，需要做远程分支关联。如果没有关联，git会在下面的操作中提示你显示的添加关联。<br>关联目的是在执行git pull, git push操作时就不需要指定对应的远程分支，你只要没有显示指定，git pull的时候，就会提示你。<br>解决方法就是按照提示添加一下呗：<br>git branch –set-upstream-to&#x3D;origin&#x2F;remote_branch  your_branch<br>其中，origin&#x2F;remote_branch是你本地分支对应的远程分支；your_branch是你当前的本地分支。</p>
<h2 id="恢复到之前的文件"><a href="#恢复到之前的文件" class="headerlink" title="恢复到之前的文件"></a>恢复到之前的文件</h2><p>对于恢复修改的文件，就是将文件从仓库中拉到本地工作区，即 仓库区 —-&gt; 暂存区 —-&gt; 工作区。</p>
<p>对于修改的文件有两种情况：</p>
<ul>
<li>只是修改了文件，<em><strong>没有任何 git 操作</strong></em></li>
<li>修改了文件，并提交到<em><strong>暂存区</strong></em>（即编辑之后，gitadd但没有gitadd但没有 git commit -m ….）</li>
<li>修改了文件，并提交到<em><strong>仓库区</strong></em>（即编辑之后，gitadd和gitadd和 git commit -m ….）</li>
</ul>
<h3 id="情况I："><a href="#情况I：" class="headerlink" title="情况I："></a>情况I：</h3><p>只是修改了文件，<em><strong>没有任何 git 操作</strong></em>，直接一个命令就可回退：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- aaa.txt # aaa.txt为文件名</span><br></pre></td></tr></table></figure>

<h3 id="情况II："><a href="#情况II：" class="headerlink" title="情况II："></a>情况II：</h3><p>修改了文件，并提交到<em><strong>暂存区</strong></em>（即编辑之后，gitadd但没有 git commit -m ….）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline    # 可以省略</span><br><span class="line">$ git reset HEAD    # 回退到当前版本</span><br><span class="line">$ git checkout -- aaa.txt    # aaa.txt为文件名</span><br></pre></td></tr></table></figure>

<h3 id="情况III："><a href="#情况III：" class="headerlink" title="情况III："></a>情况III：</h3><p>修改了文件，并提交到<em><strong>仓库区</strong></em>（即编辑之后，gitadd和gitadd和 git commit -m ….）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline    # 可以省略</span><br><span class="line">$ git reset HEAD^    # 回退到上一个版本</span><br><span class="line">$ git checkout -- aaa.txt    # aaa.txt为文件名</span><br></pre></td></tr></table></figure>

<blockquote>
<p>情况II 和 情况III 只有回退的版本不一样，</p>
</blockquote>
<p>对于 情况II，并没有 $ git commit，仓库版本也就不会更新和记录，所以回退的是当前版本</p>
<p>对于情况III，一旦 $ git commit，仓库版本就会更新并记录，所以要回退的也就是上一个版本</p>
<blockquote>
<p>git reset 版本号  —- 将暂缓区回退到指定版本</p>
</blockquote>
<p>根据 $ git log –oneline 显示的版本号（下图黄色的字），可以回退到任何一个版本，也可通过 HEAD 来指定版本（下图红色的字）。</p>
<h2 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h2><p>一、开发分支（dev）上的代码达到上线的标准后，要合并到 master 分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git checkout dev</span><br><span class="line">git pull</span><br><span class="line">git checkout master</span><br><span class="line">git merge dev</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>


<p>二、当master代码改动了，需要更新开发分支（dev）上的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git checkout master </span><br><span class="line">git pull </span><br><span class="line">git checkout dev</span><br><span class="line">git merge master </span><br><span class="line">git push -u origin dev</span><br></pre></td></tr></table></figure>

<h2 id="删除已经add的文件"><a href="#删除已经add的文件" class="headerlink" title="删除已经add的文件"></a>删除已经add的文件</h2><p><code>git rm --cached &lt;文件路径&gt;</code>，不删除物理文件，仅将该文件从缓存中删除；</p>
<p><code>git rm --f &lt;文件路径&gt;</code>，不仅将该文件从缓存中删除，还会将物理文件删除（不会回收到垃圾桶）。</p>
<p><code>git reset HEAD</code> 用版本库内容清空暂存区，（谨慎使用）</p>
<h2 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h2><h2 id="You-can-only-push-commits-that-were-committed-with-one-of-your-own-verified-emails"><a href="#You-can-only-push-commits-that-were-committed-with-one-of-your-own-verified-emails" class="headerlink" title="You can only push commits that were committed with one of your own verified emails."></a>You can only push commits that were committed with one of your own verified emails.</h2><h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">remote: GitLab: You cannot push commits for &#x27;mailto:xxxx.sss@trip.com&#x27;. You can only push commits that were committed with one of your own verified emails.</span><br><span class="line">To git.dev.sh.1kmb.com:amd.yes/hello-world.git</span><br><span class="line"> ! [remote rejected] master -&gt; master (pre-receive hook declined)</span><br><span class="line">error: failed to push some refs to &#x27;git@git.dev.sh.1kmb.com:amd.yes/hello-world.git&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commit的时候邮箱不一致</span><br></pre></td></tr></table></figure>

<h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">$ git reset --hard 9e76350248a46a16b68fef25d27e25fcd4d65312  # 回滚到没错</span><br><span class="line">$ git config --global user.email &quot;你的邮箱地址&quot;</span><br><span class="line">改下邮箱，重新conmmit</span><br></pre></td></tr></table></figure>

<h1 id="Github使用token"><a href="#Github使用token" class="headerlink" title="Github使用token"></a>Github使用token</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin https:<span class="comment">//&lt;token&gt;@github.com/&lt;username&gt;/&lt;repo&gt;.git</span></span><br></pre></td></tr></table></figure>

<h1 id="恢复版本"><a href="#恢复版本" class="headerlink" title="恢复版本"></a>恢复版本</h1><p>git 如何恢复到指定版本<br>查看git的提交版本和id 拿到需要恢复的版本号<br>　　　命令：git log　 </p>
<p>　　  2. 恢复到指定版本 </p>
<p>　　　命令：git reset –hard 44f994dd8fc1e10c9ed557824cae50d1586d0cb3   &#x2F;&#x2F;后面这一大串44f994dd8fc1e10c9ed557824cae50d1586d0cb3就是版本id</p>
<p>　　  3. 强制push</p>
<p>　　　命令：git push -f origin master</p>
<h1 id="【Git】pull遇到错误：error-Your-local-changes-to-the-following-files-would-be-overwritten-by-merge"><a href="#【Git】pull遇到错误：error-Your-local-changes-to-the-following-files-would-be-overwritten-by-merge" class="headerlink" title="【Git】pull遇到错误：error: Your local changes to the following files would be overwritten by merge:"></a>【Git】pull遇到错误：error: Your local changes to the following files would be overwritten by merge:</h1><p>首先取决于你是否想要保存本地修改。（是 &#x2F;否）</p>
<p><strong>是</strong><br>别急我们有如下三部曲</p>
<pre><code>git stash  
git pull origin master  
git stash pop  
</code></pre>
<p>git stash的时候会把你本地快照，然后git pull 就不会阻止你了，pull完之后这时你的代码并没有保留你的修改。惊了！ 别急，我们之前好像做了什么？</p>
<p>STASH<br>这时候执行git stash pop你去本地看会发现发生冲突的本地修改还在，这时候你该commit push啥的就悉听尊便了。</p>
<p><strong>否</strong><br>既然不想保留本地的修改，那好办。直接将本地的状态恢复到上一个commit id 。然后用远程的代码直接覆盖本地就好了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard </span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/13/">上一页</a></div><div class="pagination-next"><a href="/page/15/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/13/">13</a></li><li><a class="pagination-link is-current" href="/page/14/">14</a></li><li><a class="pagination-link" href="/page/15/">15</a></li><li><a class="pagination-link" href="/page/16/">16</a></li><li><a class="pagination-link" href="/page/17/">17</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/avatar.jpg" alt="程"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">程</p><p class="is-size-6 is-block">未至精疲力尽，不要怨天尤人。昨日因，今日果。今日为，明日果也！</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Earth</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">169</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/tab-engineer" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/tab-engineer"><i class="fab fa-github"></i></a></div></div></div><!--!--><!--!--><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">二月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">十一月 2021</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-10-01T06:56:20.000Z">2022-10-01</time></p><p class="title"><a href="/2022/10/01/tcpdump%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/">tcpdump详细教程</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-18T05:06:34.000Z">2022-09-18</time></p><p class="title"><a href="/2022/09/18/Typescript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Typescript学习笔记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-04T13:30:39.000Z">2022-09-04</time></p><p class="title"><a href="/2022/09/04/Go%E5%90%84%E6%97%B6%E9%97%B4%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%A7%A3%E6%9E%90/">Go各时间字符串的解析</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-21T02:56:27.000Z">2022-08-21</time></p><p class="title"><a href="/2022/08/21/%E7%89%88%E6%9C%AC%E5%8F%B7%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83/">版本号命名规范</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-19T12:54:39.000Z">2022-08-19</time></p><p class="title"><a href="/2022/08/19/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">Markdown基本语法</a></p></div></article></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com/marxphp" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">maxphp</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/avatar.jpg" alt="笔记" height="28"></a><p class="is-size-7"><span>&copy; 2022 CY</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>